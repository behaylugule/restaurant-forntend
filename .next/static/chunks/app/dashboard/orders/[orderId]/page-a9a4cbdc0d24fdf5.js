(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2745],{405:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});var a=r(2115);function n(){let e=[10,20,30,40,50],[t,r]=(0,a.useState)(1),[n,s]=(0,a.useState)(""),[o,l]=(0,a.useState)(0),[i,c]=(0,a.useState)(e[0]||10),u=(0,a.useMemo)(()=>0===i?0:Math.ceil(o/i),[o,i]);return{page:t,totalCount:o,setPage:r,setTotalCount:l,handleNextPage:()=>{t<u&&r(e=>e+1)},handlePrevPage:()=>{t>1&&r(e=>e-1)},page_sizes:e,pageSize:i,setPageSize:c,totalPages:u,search:n,setSearch:s}}},799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(5155),n=r(9550),s=r(2115),o=r(5695),l=r(8524),i=r(7168),c=r(5411),u=r(405),d=r(5389),h=r(5765),f=r(4468),p=r(1412),m=r(3568);function g(){let{isAuthenticated:e}=(0,n.A)(),t=(0,o.useRouter)(),[r,g]=(0,s.useState)([]),[v,x]=(0,s.useState)(),[y,b]=(0,s.useState)(!1),w=(0,u.W)(),j=(0,o.useParams)();(0,s.useEffect)(()=>{e||t.push("/login")},[e]),(0,s.useEffect)(()=>{A()},[w.page,w.search]),(0,s.useEffect)(()=>{N()},[]);let A=()=>{var e;d.T.getOrderItems({page:w.page,search:w.search,page_size:w.pageSize,order_id:null==(e=j.orderId)?void 0:e.toLocaleString()}).then(e=>{b(!1),g(e.data.data.results),w.setTotalCount(e.data.data.count)}).catch(e=>{b(!1),console.log(e)})},N=()=>{var e;(null==(e=j.orderId)?void 0:e.toLocaleString())&&(b(!0),f.Q.getOrder(j.orderId.toLocaleString()).then(e=>{x(e.data.data),b(!1)}).catch(e=>{console.log(e)}))},k=e=>{(null==v?void 0:v.id)&&f.Q.orderDetailDo(v.id,e,{}).then(e=>{N()}).catch(e=>{console.log(e)})};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-2 lg:px-12 py-4",children:[(0,a.jsx)(i.$,{className:"bg-[#C71F37] hover:bg-[#C71F37]/80",onClick:()=>t.back(),children:"Back"}),(0,a.jsxs)("h3",{className:"text-[32px] text-gray-600 flex items-center gap-5",children:["#Order-",null==v?void 0:v.id,"-"," ",(0,a.jsxs)("span",{className:"text-[20px]",children:["status: ",null==v?void 0:v.status]})]}),(null==v?void 0:v.status)==h.w8.PENDING?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.$,{onClick:()=>k(h.w8.CANCLED),children:"Cancle Order"}),(0,a.jsx)(i.$,{className:"bg-[#C71F37] hover:bg-[#C71F37]/80",onClick:()=>k(h.w8.COMPLETED),children:"Complete Order"})]}):(0,a.jsx)("div",{}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)(i.$,{variant:"secondary",className:"ml-4",onClick:()=>{var e;(null==(e=j.orderId)?void 0:e.toLocaleString())&&p.N.generateOrderDetail(j.orderId.toLocaleString()).then(e=>{m.Ay.success(e.data.data.message)}).catch(e=>{console.log(e)})},children:"Generate Report"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-center px-2 lg:px-12",children:[(0,a.jsxs)(l.XI,{className:"bg-white",children:[(0,a.jsx)(l.A0,{children:(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nd,{children:"ID"}),(0,a.jsx)(l.nd,{children:" Name"}),(0,a.jsx)(l.nd,{children:"Price"}),(0,a.jsx)(l.nd,{children:"Quantity"})]})}),(0,a.jsx)(l.BF,{children:!y&&r.map((e,t)=>(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nA,{children:null==e?void 0:e.id}),(0,a.jsx)(l.nA,{children:null==e?void 0:e.menu_name}),(0,a.jsx)(l.nA,{children:null==e?void 0:e.price}),(0,a.jsx)(l.nA,{children:e.quantity})]},t))})]}),(0,a.jsx)(c.dK,{className:"self-start",children:(0,a.jsxs)(c.Iu,{children:[(0,a.jsx)(c.cU,{onClick:y?void 0:w.handlePrevPage,children:(0,a.jsx)(c.Eb,{})}),w.totalCount>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.cU,{children:(0,a.jsxs)(c.n$,{children:["Total:",w.totalCount]})})}),(0,a.jsx)(c.cU,{onClick:y?void 0:w.handleNextPage,className:0===r.length?"pointer-events-none opacity-50 ":"",children:(0,a.jsx)(c.WA,{})})]})})]})]})}},1412:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var a=r(5784);let n={generateOrderReport:s,generateOrderDetail:o,generateMenuReport:l,generateShopReport:i,generateOrgReport:c,generateUsersReport:u};async function s(e){return await a.A.patch("/reports/orders/",{...e})}async function o(e){return await a.A.get("/reports/orders/".concat(e,"/"))}async function l(e){return await a.A.patch("/reports/menus/",{...e})}async function i(e){return await a.A.patch("reports/shops/",e)}async function c(e){return await a.A.patch("reports/organizations/",e)}async function u(e){return await a.A.patch("reports/users/",e)}},2085:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var a=r(2596);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=a.$,o=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return s(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:l}=t,i=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let s=n(t)||n(a);return o[e][s]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return s(e,i,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},2107:(e,t,r)=>{"use strict";r.d(t,{D:()=>n});var a=r(5784);let n={registerUser:function(e){return a.A.post("/register/",e)},login:s,logout:h,getCurrentUser:o,changePassword:l,getUsers:i,forgetPassword:c,resetPassword:u,updateProfile:d};async function s(e){return await a.A.post("/token/",e)}async function o(){return await a.A.get("/me/")}async function l(e){return await a.A.put("/change-password/",e)}async function i(e){return await a.A.get("/users/",{params:{...e}})}async function c(e){return await a.A.post("/password-reset/",{email:e})}async function u(e){return await a.A.post("/password-reset/confirm/?token=".concat(e.token),e)}async function d(e){return await a.A.patch("/update-profile/".concat(e.id,"/"),e)}async function h(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}},3999:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,cn:()=>o,f:()=>l});var a=r(2596),n=r(3319),s=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}function l(e){let t=new Date;e=new Date(e);let r=t.getTime()-e.getTime(),a=Math.floor(r/1e3),n=Math.floor(r/6e4),s=Math.floor(r/36e5),o=Math.floor(r/864e5),l=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return a<60?l.format(-a,"second"):n<60?l.format(-n,"minute"):s<24?l.format(-s,"hour"):l.format(-o,"day")}function i(e){return(0,n.GP)(e,"HH:mm a")}},4468:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});var a=r(5784);let n={addOrder:s,getOrders:l,getOrder:o,orderDetailDo:i};async function s(e){return await a.A.post("/orders/",e)}async function o(e){return await a.A.get("/orders/".concat(e,"/"))}async function l(e){return await a.A.get("/orders/",{params:{...e}})}async function i(e,t,r){return await a.A.patch("/orders/".concat(e,"/"),r,{params:{method:t}})}},5389:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var a=r(5784);let n={getOrderItems:s};async function s(e){return await a.A.get("/orders/order-items/",{params:{...e}})}},5411:(e,t,r)=>{"use strict";r.d(t,{dK:()=>c,Iu:()=>u,cU:()=>d,n$:()=>h,WA:()=>p,Eb:()=>f});var a=r(5155);r(2115);var n=r(9946);let s=(0,n.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),o=(0,n.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var l=r(3999),i=r(7168);function c(e){let{className:t,...r}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",t),...r})}function u(e){let{className:t,...r}=e;return(0,a.jsx)("ul",{"data-slot":"pagination-content",className:(0,l.cn)("flex flex-row items-center gap-1",t),...r})}function d(e){let{...t}=e;return(0,a.jsx)("li",{"data-slot":"pagination-item",...t})}function h(e){let{className:t,isActive:r,size:n="icon",...s}=e;return(0,a.jsx)("a",{"aria-current":r?"page":void 0,"data-slot":"pagination-link","data-active":r,className:(0,l.cn)((0,i.r)({variant:r?"outline":"ghost",size:n}),t),...s})}function f(e){let{className:t,...r}=e;return(0,a.jsxs)(h,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("gap-1 px-2.5 sm:pl-2.5",t),...r,children:[(0,a.jsx)(s,{}),(0,a.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function p(e){let{className:t,...r}=e;return(0,a.jsxs)(h,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("gap-1 px-2.5 sm:pr-2.5",t),...r,children:[(0,a.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,a.jsx)(o,{})]})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},5765:(e,t,r)=>{"use strict";r.d(t,{Hc:()=>o,Mx:()=>s,tX:()=>a,w8:()=>n});var a=function(e){return e.ADMIN="admin",e.ORGANIZATION_ADMIN="organization_admin",e.SHOP_ADMIN="shop_admin",e.CUSTOMER="customer",e.USER="user",e}({}),n=function(e){return e.PENDING="pending",e.PROCESSING="processing",e.READY="ready",e.COMPLETED="completed",e.CANCLED="cancled",e}({}),s=function(e){return e.USER="user",e.SYSTEM="system",e}({});let o="https://restaurantsaasmenuimage.s3.amazonaws.com"},5784:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(3464),n=r(3568);let s="http://localhost:8000/api",o=a.A.create({baseURL:s});o.interceptors.request.use(e=>{console.log("base URL",s);{let t=localStorage.getItem("access");t&&(e.headers.Authorization="Bearer ".concat(t))}return"post"!==e.method&&"put"!==e.method&&"patch"!==e.method||e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,r,o;let l=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!l._retry){l._retry=!0;try{localStorage.getItem("refresh");let e=await a.A.post(s+"/token/refresh");localStorage.setItem("access",e.data.access),l.headers.Authorization="Bearer ".concat(e.data.access)}catch(e){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}}return console.log("Error response:",e.response),n.Ay.error((null==(o=e.response)||null==(r=o.data)?void 0:r.message)||"An error occurred"),Promise.reject(e)});let l=o},6101:(e,t,r)=>{"use strict";r.d(t,{s:()=>o,t:()=>s});var a=r(2115);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,a=e.map(e=>{let a=n(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():n(e[t],null)}}}}function o(...e){return a.useCallback(s(...e),e)}},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>i,r:()=>l});var a=r(5155);r(2115);var n=r(9708),s=r(2085),o=r(3999);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:r,size:s,asChild:i=!1,...c}=e,u=i?n.DX:"button";return(0,a.jsx)(u,{"data-slot":"button",className:(0,o.cn)(l({variant:r,size:s,className:t})),...c})}},8524:(e,t,r)=>{"use strict";r.d(t,{A0:()=>o,BF:()=>l,Hj:()=>i,XI:()=>s,nA:()=>u,nd:()=>c});var a=r(5155);r(2115);var n=r(3999);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...r})})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function u(e){let{className:t,...r}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}},9346:(e,t,r)=>{Promise.resolve().then(r.bind(r,799))},9550:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>i});var a=r(5155),n=r(2115),s=r(2107),o=r(3568);let l=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,n.useState)(null),[c,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=localStorage.getItem("access");e&&(i(e),s.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{console.error("Failed to fetch current user:",e),u(null)}))},[]),(0,a.jsx)(l.Provider,{value:{user:c,accessToken:r,isAuthenticated:!!r,login:e=>{i(e),s.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{o.Ay.error("failed to fetch current user")})},logout:()=>{localStorage.removeItem("access"),i(null),u(null)}},children:t})},c=()=>{let e=(0,n.useContext)(l);if(void 0==e)throw Error("useAuth must be used within an Authprovider");return e}},9708:(e,t,r)=>{"use strict";r.d(t,{DX:()=>l,TL:()=>o});var a=r(2115),n=r(6101),s=r(5155);function o(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(a.isValidElement(r)){var o;let e,l,i=(o=r,(l=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(l=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),c=function(e,t){let r={...t};for(let a in t){let n=e[a],s=t[a];/^on[A-Z]/.test(a)?n&&s?r[a]=(...e)=>{let t=s(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...s}:"className"===a&&(r[a]=[n,s].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==a.Fragment&&(c.ref=t?(0,n.t)(t,i):i),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...o}=e,l=a.Children.toArray(n),i=l.find(c);if(i){let e=i.props.children,n=l.map(t=>t!==i?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...o,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,s.jsx)(t,{...o,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var l=o("Slot"),i=Symbol("radix.slottable");function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:r,strokeWidth:i?24*Number(l)/Number(n):l,className:s("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:i,...c}=r;return(0,a.createElement)(l,{ref:o,iconNode:t,className:s("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return r.displayName=n(e),r}}},e=>{e.O(0,[7567,397,8441,5964,7358],()=>e(e.s=9346)),_N_E=e.O()}]);