(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1049],{1463:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>E});var s=t(5155),r=t(9550),n=t(2115),i=t(5695),c=t(8524),l=t(5623),d=t(6839),o=t(3717),u=t(4111),h=t(8698),m=t(7133),x=t(823),p=t(7168),g=t(9840),j=t(9540),f=t(2177),y=t(9852),v=t(1154),b=t(81),N=t(5196),A=t(3999),w=t(3568),S=t(405),M=t(4895),_=t(7938),C=t(3828);function k(e){let{setOpen:a,getMenus:t,actionType:r="add",menuDetail:i}=e,c=(0,f.mN)({defaultValues:{...i}}),[l,d]=(0,n.useState)([]),[o,h]=(0,n.useState)(!1),m=(0,S.W)(),[g,k]=(0,n.useState)(!1),[z,P]=(0,n.useState)();(0,n.useEffect)(()=>{I()},[]);let R=(0,n.useMemo)(()=>{var e;let a=null==(e=l.find(e=>e.id===c.getValues("menu_category")))?void 0:e.name;if(a)return a;l.length>0&&c.getValues("menu_category")&&_.U.getCategory(c.getValues("menu_category")||"").then(e=>{d(a=>[...a,e.data.data])}).catch(e=>{console.log(e)})},[l,c.getValues("menu_category")]),I=()=>{h(!0),_.U.getCategories({page:m.page,page_size:m.pageSize,search:m.search}).then(e=>{d(e.data.data.results),h(!1)}).catch(e=>{h(!1)})};return(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(j.lV,{...c,children:(0,s.jsxs)("form",{onSubmit:c.handleSubmit(e=>{z&&(e.image=z),"add"===r?(h(!0),u.t.addMenu(e).then(()=>{w.Ay.success("Menu has been created sucessfuly"),h(!1),a(!1),t()}).catch(e=>{h(!1),console.log(e)})):"edit"===r&&u.t.updateMenu(e).then(()=>{w.Ay.success("Menu has been updated sucessfuly"),h(!1),a(!1),t()}).catch(e=>{console.log(e)})}),children:[(0,s.jsxs)(j.eI,{className:"",children:[(0,s.jsx)(j.lR,{children:"Menu Name"}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(y.p,{placeholder:"name",...c.register("name",{required:"name is required field"})})}),c.formState.errors.name&&(0,s.jsx)(j.Rr,{className:"text-red text-sm",children:c.formState.errors.name.message})]}),(0,s.jsxs)(j.eI,{className:"mt-6",children:[(0,s.jsx)(j.lR,{children:"description"}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(y.p,{placeholder:"description",...c.register("description",{required:"description is required field"})})}),c.formState.errors.description&&(0,s.jsx)(j.Rr,{className:"text-red text-sm",children:c.formState.errors.description.message})]}),(0,s.jsxs)(j.eI,{className:"mt-6",children:[(0,s.jsx)(j.lR,{children:" Price"}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(y.p,{placeholder:"price",...c.register("price"),type:"number"})})]}),(0,s.jsxs)(j.eI,{className:"mt-6",children:[(0,s.jsx)(j.lR,{children:"Preparation Time(minutes)"}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(y.p,{placeholder:"preparation time in minutes",...c.register("preparation_time",{required:"preparation time is required field"})})})]}),(0,s.jsx)(j.zB,{control:c.control,name:"menu_category",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{className:"flex flex-col mt-6",children:[(0,s.jsx)(j.lR,{children:"Menu Category"}),(0,s.jsxs)(x.AM,{open:g,onOpenChange:e=>{k(e),e?m.search||0!==l.length||o||I():m.setSearch("")},children:[(0,s.jsx)(x.Wv,{asChild:!0,children:(0,s.jsx)(j.MJ,{children:(0,s.jsxs)(p.$,{variant:"outline",role:"combobox","aria-expanded":g,className:(0,A.cn)("w-full justify-between",!a.value&&"text-muted-foreground "),disabled:o&&g,children:[o&&g?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"})," ","Loading..."]}):a.value?R||"Loading selected...":"Select a menu category...",!o&&(0,s.jsx)(b.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,s.jsx)(x.hl,{className:"w-[300px] p-0",children:(0,s.jsxs)(M.uB,{children:[(0,s.jsx)(M.G7,{placeholder:"Search categories...",value:m.search,onValueChange:m.setSearch}),(0,s.jsx)(M.oI,{children:o&&g?(0,s.jsxs)(M.xL,{className:"py-6 text-center text-sm",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin inline-block"})," ","Fetching menu category..."]}):0===l.length?(0,s.jsx)(M.xL,{className:"py-6 text-center text-sm",children:"No menu category found."}):(0,s.jsx)(M.L$,{children:l.map(e=>(0,s.jsxs)(M.h_,{value:e.name,onSelect:()=>{c.setValue("menu_category",e.id||""),k(!1),m.setSearch("")},children:[(0,s.jsx)(N.A,{className:(0,A.cn)("mr-2 h-4 w-4",(null==e?void 0:e.id)===a.value?"opacity-100":"opacity-0")}),e.name]},e.id))})})]})})]}),(0,s.jsx)(j.Rr,{children:"Select an Category for your item."})]})}}),(0,s.jsxs)(j.eI,{className:"mt-4 mb-4",children:[(0,s.jsx)(j.lR,{children:"Menu Image"}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(y.p,{placeholder:"Menu Image",type:"file",onChange:e=>{if(e.target.files){if(!e.target.files[0])return;let a=new FormData;a.append("file",e.target.files[0]),a.append("title",e.target.files[0].name),C.Y.uploadFile(a).then(e=>{P(e.data.data.id)}).catch(e=>{console.log(e)})}}})})]}),(0,s.jsx)(p.$,{type:"submit",className:"mt-4 hover:bg-gray-600",children:o?(0,s.jsx)("span",{className:"inline-block w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}):"edit"==r?"Update Menu":"Add Menu"})]})})})}var z=t(6037),P=t(5411),R=t(854),I=t(1412);function E(){let{isAuthenticated:e}=(0,r.A)(),a=(0,i.useRouter)(),[t,j]=(0,n.useState)([]),[f,y]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!1),[N,A]=(0,n.useState)("add"),[M,C]=(0,n.useState)(),E=(0,S.W)(),U=(0,S.W)(),[V,q]=(0,n.useState)(),[L,F]=(0,n.useState)([]),[J,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{e||a.push("/login")},[e]),(0,n.useEffect)(()=>{W()},[E.page,V]);let W=()=>{u.t.getMenus({page:E.page,page_size:E.pageSize,...V}).then(e=>{y(!1),j(e.data.data.results),E.setTotalCount(e.data.data.count)}).catch(e=>{y(!1),console.log(e)})},$=async e=>{y(!0),u.t.deleteMenu(e).then(a=>{y(!1),j(a=>a.filter(a=>(null==a?void 0:a.id)!==e))}).catch(e=>{y(!1),console.log(e)})};(0,n.useEffect)(()=>{v||(C({id:"",name:"",description:"",menu_category:"",image:""}),A("add"))},[v]);let D=()=>{_.U.getCategories({page:U.page,page_size:1e3,search:U.search}).then(e=>{F(e.data.data.results)}).catch(e=>{console.log(e)})};(0,n.useEffect)(()=>{D()},[U.search]);let O=[{label:"search",name:"search",type:"text"},{label:"menu_category",name:"menu_category",type:"select",search:U.search,setSearch:U.setSearch,searchItems:D,data:L,isLoading:J,from_db:!0}];return(0,s.jsxs)("div",{className:"w-full px-2 lg:px-12",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center px-2 lg:px-12 py-4 bg-white my-6",children:[(0,s.jsx)("div",{className:"flex-6/7",children:(0,s.jsx)(R.A,{config:O,onFilterChange:e=>{q({...e})},generateReport:()=>{I.N.generateMenuReport(V).then(e=>{w.Ay.success(e.data.data.message)}).catch(e=>{})}})}),(0,s.jsx)("div",{className:"flex-1/7",children:(0,s.jsxs)(g.lG,{open:v,onOpenChange:b,children:[(0,s.jsx)(g.zM,{className:"bg-black hover:bg-gray-500 cursor-pointer text-white px-4 py-2 rounded-lg shadow-lg",children:"Add Menu"}),(0,s.jsxs)(g.Cf,{children:[(0,s.jsx)(g.c7,{children:(0,s.jsx)(g.L3,{children:"Add Menu"})}),(0,s.jsx)(z.w,{}),(0,s.jsx)(k,{setOpen:b,getMenus:W,actionType:N,menuDetail:M})]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center ",children:[(0,s.jsxs)(c.XI,{className:"bg-white",children:[(0,s.jsx)(c.A0,{children:(0,s.jsxs)(c.Hj,{children:[(0,s.jsx)(c.nd,{children:"ID"}),(0,s.jsx)(c.nd,{children:"Name"}),(0,s.jsx)(c.nd,{children:"Price"}),(0,s.jsx)(c.nd,{children:"Preparation Time"}),(0,s.jsx)(c.nd,{children:"Description"}),(0,s.jsx)(c.nd,{children:"Action"})]})}),(0,s.jsx)(c.BF,{children:!f&&t.map((e,a)=>(0,s.jsxs)(c.Hj,{children:[(0,s.jsx)(c.nA,{children:null==e?void 0:e.id}),(0,s.jsx)(c.nA,{children:null==e?void 0:e.name}),(0,s.jsx)(c.nA,{children:null==e?void 0:e.price}),(0,s.jsx)(c.nA,{children:null==e?void 0:e.preparation_time}),(0,s.jsx)(c.nA,{children:null==e?void 0:e.description}),(0,s.jsx)(c.nA,{children:(0,s.jsxs)(h.rI,{children:[(0,s.jsx)(m.ty,{children:(0,s.jsx)(l.A,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsxs)(m.SQ,{className:"w-18",children:[(0,s.jsx)(m.lp,{className:"flex items-center text-gray-700 cursor-pointer",children:(0,s.jsxs)(x.AM,{children:[(0,s.jsxs)(x.Wv,{className:"flex items-center text-gray-700 cursor-pointer",children:[(0,s.jsx)(d.A,{className:"mr-4 text-[12px]"}),"Delete"]}),(0,s.jsxs)(x.hl,{className:"w-64",children:["are you sure to delete this book?",(0,s.jsxs)("div",{className:"flex justify-center mt-4",children:[(0,s.jsx)(p.$,{className:"text-red-600 bg-transparent outline-red-600",children:"No"}),(0,s.jsx)(p.$,{className:"text-green-600 bg-transparent outline-green-600",onClick:()=>$(e.id),children:"Yes"})]})]})]})}),(0,s.jsxs)(m.lp,{className:"flex item-center text-gray-700 cursor-pointer",onClick:()=>{C(e),A("edit"),b(!0)},children:[(0,s.jsx)(o.A,{className:"mr-4 text-[12px]"}),"Update"]})]})]})})]},a))})]}),(0,s.jsx)(P.dK,{className:"self-start",children:(0,s.jsxs)(P.Iu,{children:[(0,s.jsx)(P.cU,{onClick:f?void 0:E.handlePrevPage,children:(0,s.jsx)(P.Eb,{})}),E.totalCount>0&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(P.cU,{children:(0,s.jsxs)(P.n$,{children:["Total:",E.totalCount]})})}),(0,s.jsx)(P.cU,{onClick:f?void 0:E.handleNextPage,className:0===t.length?"pointer-events-none opacity-50 ":"",children:(0,s.jsx)(P.WA,{})})]})})]})]})}},3717:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3828:(e,a,t)=>{"use strict";t.d(a,{Y:()=>r});var s=t(5784);let r={uploadFile:n};async function n(e){return await s.A.post("/upload/",e,{headers:{"Content-Type":"multipart/form-data"}})}},4111:(e,a,t)=>{"use strict";t.d(a,{t:()=>r});var s=t(5784);let r={getMenus:n,getMenu:i,addMenu:c,updateMenu:l,deleteMenu:d,getMuenubyRestorantId:o};async function n(e){return await s.A.get("/menu/",{params:{...e}})}async function i(e){return await s.A.get("/menu/".concat(e,"/"))}async function c(e){return await s.A.post("/menu/",e)}async function l(e){return await s.A.patch("/menu/".concat(e.id,"/"),e)}async function d(e){return await s.A.delete("/menu/".concat(e,"/"))}async function o(e){return await s.A.get("/client/menus/".concat(e.id),{params:{category_id:e.category_id,page:e.page,page_size:e.page_size,search:e.search}})}},4876:(e,a,t)=>{Promise.resolve().then(t.bind(t,1463))},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},6037:(e,a,t)=>{"use strict";t.d(a,{w:()=>i});var s=t(5155);t(2115);var r=t(7489),n=t(3999);function i(e){let{className:a,orientation:t="horizontal",decorative:i=!0,...c}=e;return(0,s.jsx)(r.b,{"data-slot":"separator",decorative:i,orientation:t,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...c})}},6839:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]])},7489:(e,a,t)=>{"use strict";t.d(a,{b:()=>d});var s=t(2115),r=t(3655),n=t(5155),i="horizontal",c=["horizontal","vertical"],l=s.forwardRef((e,a)=>{var t;let{decorative:s,orientation:l=i,...d}=e,o=(t=l,c.includes(t))?l:i;return(0,n.jsx)(r.sG.div,{"data-orientation":o,...s?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:a})});l.displayName="Separator";var d=l},7938:(e,a,t)=>{"use strict";t.d(a,{U:()=>r});var s=t(5784);let r={createCategory:n,getCategories:i,getCategory:c,updateCategory:l,deleteCategory:d,getMenuCategoriesForClient:o};async function n(e){return await s.A.post("/categories/",e)}async function i(e){let{page:a,page_size:t,search:r=""}=e;return await s.A.get("/categories/",{params:{page:a,search:r,page_size:t}})}async function c(e){return await s.A.get("/categories/".concat(e,"/"))}async function l(e,a){return await s.A.patch("/categories/".concat(e,"/"),a)}async function d(e){return await s.A.delete("/categories/".concat(e,"/"))}async function o(e){return await s.A.get("/client/categories/".concat(e.id),{params:{page:e.page,search:e.search,page_size:e.page_size}})}},9852:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var s=t(5155);t(2115);var r=t(3999);function n(e){let{className:a,type:t,...n}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...n})}}},e=>{e.O(0,[7567,397,2177,2128,8795,9196,8345,8467,9857,5715,8441,5964,7358],()=>e(e.s=4876)),_N_E=e.O()}]);