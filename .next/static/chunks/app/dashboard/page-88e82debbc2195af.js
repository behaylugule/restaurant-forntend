(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{405:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var a=s(2115);function r(){let e=[10,20,30,40,50],[t,s]=(0,a.useState)(1),[r,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(0),[i,c]=(0,a.useState)(e[0]||10),d=(0,a.useMemo)(()=>0===i?0:Math.ceil(l/i),[l,i]);return{page:t,totalCount:l,setPage:s,setTotalCount:o,handleNextPage:()=>{t<d&&s(e=>e+1)},handlePrevPage:()=>{t>1&&s(e=>e-1)},page_sizes:e,pageSize:i,setPageSize:c,totalPages:d,search:r,setSearch:n}}},2107:(e,t,s)=>{"use strict";s.d(t,{D:()=>r});var a=s(5784);let r={registerUser:function(e){return a.A.post("/register/",e)},login:n,logout:x,getCurrentUser:l,changePassword:o,getUsers:i,forgetPassword:c,resetPassword:d,updateProfile:u};async function n(e){return await a.A.post("/token/",e)}async function l(){return await a.A.get("/me/")}async function o(e){return await a.A.put("/change-password/",e)}async function i(e){return await a.A.get("/users/",{params:{...e}})}async function c(e){return await a.A.post("/password-reset/",{email:e})}async function d(e){return await a.A.post("/password-reset/confirm/?token=".concat(e.token),e)}async function u(e){return await a.A.patch("/update-profile/".concat(e.id,"/"),e)}async function x(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}},3403:(e,t,s)=>{"use strict";s.d(t,{TR:()=>f,bq:()=>x,eb:()=>g,gC:()=>m,l6:()=>c,s3:()=>d,yv:()=>u});var a=s(5155);s(2115);var r=s(8893),n=s(6474),l=s(5196),o=s(7863),i=s(3999);function c(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,a.jsx)(r.YJ,{"data-slot":"select-group",...t})}function u(e){let{...t}=e;return(0,a.jsx)(r.WT,{"data-slot":"select-value",...t})}function x(e){let{className:t,size:s="default",children:l,...o}=e;return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":s,className:(0,i.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o,children:[l,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:s,position:n="popper",...l}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...l,children:[(0,a.jsx)(h,{}),(0,a.jsx)(r.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(p,{})]})})}function f(e){let{className:t,...s}=e;return(0,a.jsx)(r.JU,{"data-slot":"select-label",className:(0,i.cn)("text-muted-foreground px-2 py-1.5 text-xs",t),...s})}function g(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(l.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:s})]})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(o.A,{className:"size-4"})})}function p(e){let{className:t,...s}=e;return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"size-4"})})}},3999:(e,t,s)=>{"use strict";s.d(t,{D:()=>i,cn:()=>l,f:()=>o});var a=s(2596),r=s(3319),n=s(9688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}function o(e){let t=new Date;e=new Date(e);let s=t.getTime()-e.getTime(),a=Math.floor(s/1e3),r=Math.floor(s/6e4),n=Math.floor(s/36e5),l=Math.floor(s/864e5),o=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return a<60?o.format(-a,"second"):r<60?o.format(-r,"minute"):n<24?o.format(-n,"hour"):o.format(-l,"day")}function i(e){return(0,r.GP)(e,"HH:mm a")}},4952:(e,t,s)=>{Promise.resolve().then(s.bind(s,8834))},5765:(e,t,s)=>{"use strict";s.d(t,{Hc:()=>l,Mx:()=>n,tX:()=>a,w8:()=>r});var a=function(e){return e.ADMIN="admin",e.ORGANIZATION_ADMIN="organization_admin",e.SHOP_ADMIN="shop_admin",e.CUSTOMER="customer",e.USER="user",e}({}),r=function(e){return e.PENDING="pending",e.PROCESSING="processing",e.READY="ready",e.COMPLETED="completed",e.CANCLED="cancled",e}({}),n=function(e){return e.USER="user",e.SYSTEM="system",e}({});let l="https://restaurantsaasmenuimage.s3.amazonaws.com"},5784:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(3464),r=s(3568);let n="http://16.170.234.55/api",l=a.A.create({baseURL:n});l.interceptors.request.use(e=>{console.log("base URL",n);{let t=localStorage.getItem("access");t&&(e.headers.Authorization="Bearer ".concat(t))}return"post"!==e.method&&"put"!==e.method&&"patch"!==e.method||e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t,s,l;let o=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!o._retry){o._retry=!0;try{localStorage.getItem("refresh");let e=await a.A.post(n+"/token/refresh");localStorage.setItem("access",e.data.access),o.headers.Authorization="Bearer ".concat(e.data.access)}catch(e){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}}return console.log("Error response:",e.response),r.Ay.error((null==(l=e.response)||null==(s=l.data)?void 0:s.message)||"An error occurred"),Promise.reject(e)});let o=l},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>i,r:()=>o});var a=s(5155);s(2115);var r=s(9708),n=s(2085),l=s(3999);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:s,size:n,asChild:i=!1,...c}=e,d=i?r.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,l.cn)(o({variant:s,size:n,className:t})),...c})}},8482:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>o,Zp:()=>n,aR:()=>l,wL:()=>i});var a=s(5155);s(2115);var r=s(3999);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},8524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>l,BF:()=>o,Hj:()=>i,XI:()=>n,nA:()=>d,nd:()=>c});var a=s(5155);s(2115);var r=s(3999);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",t),...s})})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}},8834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var a=s(5155),r=s(2115),n=s(9550),l=s(5695),o=s(3403),i=s(3338),c=s(4870),d=s(5937),u=s(1007),x=s(5784);let m={getGlobalCount:f,getKichenDisplay:g};async function f(){return await x.A.get("/dashboard/count/")}async function g(e){return await x.A.get("/orders/kitchen-display/",{params:{...e}})}function h(){let[e,t]=(0,r.useState)(),[s,n]=(0,r.useState)();return(0,r.useEffect)(()=>{m.getGlobalCount().then(e=>{n(e.data.data)}).catch(e=>{})},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full flex flex-col gap-5 lg:flex-row items-center justify-between",children:[(0,a.jsxs)("div",{className:"bg-white px-6 py-6 rounded-lg w-full lg:flex-1/3 shadow-lg ",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(i.A,{size:64,className:"text-gray-500 text-[#000000]"}),(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)(c.A,{size:16,className:"text-green-400 font-normal"}),(0,a.jsx)("span",{className:"text-green-400 font-normal mr-3",children:"5.5%"})," ",(0,a.jsx)("span",{className:"text-green-400 font-normal ",children:"+10 today"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold",children:null==s?void 0:s.total_organizations}),(0,a.jsx)("span",{className:"text-[18px] font-normal text-gray-500",children:"Total Organizations"})]})]}),(0,a.jsxs)("div",{className:"bg-white px-6 py-6 rounded-lg w-full lg:flex-1/3 shadow-lg ",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(d.A,{size:64,className:"text-gray-500 text-[#000000]"}),(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)(c.A,{size:16,className:"text-green-400 font-normal"}),(0,a.jsx)("span",{className:"text-green-400 font-normal mr-3",children:"5.5%"})," ",(0,a.jsx)("span",{className:"text-green-400 font-normal ",children:"+3 today"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold",children:null==s?void 0:s.total_shops}),(0,a.jsx)("span",{className:"text-[18px] font-normal text-gray-500",children:"Total Shops"})]})]}),(0,a.jsxs)("div",{className:"bg-white px-6 py-6 rounded-lg w-full lg:flex-1/3 shadow-lg ",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(u.A,{size:64,className:"text-gray-500 text-[#000000]"}),(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)(c.A,{size:16,className:"text-green-400 font-normal"}),(0,a.jsx)("span",{className:"text-green-400 font-normal mr-3",children:"5.5%"})," ",(0,a.jsx)("span",{className:"text-green-400 font-normal ",children:"+1 today"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold",children:null==s?void 0:s.total_users}),(0,a.jsx)("span",{className:"text-[18px] font-normal text-gray-500",children:"Total Users"})]})]})]})})}let p=(0,s(5028).default)(()=>Promise.all([s.e(5647),s.e(8579),s.e(3442)]).then(s.bind(s,3442)),{loadableGenerated:{webpack:()=>[3442]},ssr:!1});function b(){return(0,a.jsx)("div",{className:"w-full bg-white rounded-lg shadow-lg p-6 mb-10",children:(0,a.jsx)(p,{chartData:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"Books ",data:[65,59,80,81,56,55,40],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],borderColor:["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"],borderWidth:1}]}})})}var v=s(8524),j=s(405);function w(){let e=(0,j.W)(),[t,s]=(0,r.useState)([]),[n,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o()},[e.page,e.search]);let o=()=>{};return(0,a.jsxs)("div",{className:"w-full bg-white w-full rounded-xl shadow-xl mb-10 pb-10 pt-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 px-6 ",children:[(0,a.jsx)("h3",{className:"text-[16px] font-medium text-gray-600",children:"Number of Books"}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)("input",{className:"max-w-[200px] bg-white px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"search",onChange:t=>e.setSearch(t.target.value)})})]}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(v.XI,{children:[(0,a.jsx)(v.A0,{children:(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nd,{className:"text-[16px] font-medium text-gray-900",children:"ID"}),(0,a.jsx)(v.nd,{className:"text-[16px] font-medium text-gray-900",children:"Category"}),(0,a.jsx)(v.nd,{className:"text-[16px] font-medium text-gray-900",children:"Number of Book"})]})}),(0,a.jsx)(v.BF,{children:!n&&t&&t.map((e,t)=>(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nA,{className:"font-medium text-gray-600",children:e.category_id}),(0,a.jsx)(v.nA,{className:"font-medium text-gray-600",children:e.category_name}),(0,a.jsx)(v.nA,{className:"font-medium text-gray-600",children:e.number_of_book})]},e.category_id))})]})})]})}var N=s(704),y=s(3999);function A(e){let{className:t,...s}=e;return(0,a.jsx)(N.bL,{"data-slot":"tabs",className:(0,y.cn)("flex flex-col gap-2",t),...s})}function S(e){let{className:t,...s}=e;return(0,a.jsx)(N.B8,{"data-slot":"tabs-list",className:(0,y.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function _(e){let{className:t,...s}=e;return(0,a.jsx)(N.l9,{"data-slot":"tabs-trigger",className:(0,y.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function k(e){let{className:t,...s}=e;return(0,a.jsx)(N.UC,{"data-slot":"tabs-content",className:(0,y.cn)("flex-1 outline-none",t),...s})}var C=s(5765),E=s(7168),D=s(8482),I=s(1787);function z(e){var t;let{order:s,handleStatusChange:r}=e;return(0,a.jsxs)(D.Zp,{className:"pt-0",children:[(0,a.jsxs)(D.aR,{className:"w-full py-2 rounded-t-lg ".concat((null==s?void 0:s.status)===C.w8.PENDING?"bg-[#C71F37]":(null==s?void 0:s.status)==C.w8.PROCESSING?"bg-yellow-400":"bg-green-400"," flex justify-between items-center text-white px-2"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("span",{children:["Customer :",null==s?void 0:s.username]}),(0,a.jsxs)("span",{className:"flex gap-3",children:[(0,a.jsx)(I.A,{})," ",null==s?void 0:s.table_number_name]}),(0,a.jsxs)("span",{children:["Order ID : ",null==s?void 0:s.id]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"px-4 py-2 border-2 border-gray-300 rounded-[30px] items-center justify-center",children:"Dine In"}),(0,a.jsx)("span",{children:(0,y.D)((null==s?void 0:s.create_date)||new Date)})]})]}),(0,a.jsx)(D.Wu,{className:"px-3 py-2 flex flex-col gap-3",children:null==s||null==(t=s.order_items)?void 0:t.map(e=>(0,a.jsxs)("div",{className:"flex gap-4 items-center text-gray-600 text-normal",children:[(0,a.jsxs)("span",{children:[e.quantity,"x"]}),(0,a.jsx)("span",{children:e.menu_name})]},e.id))}),(0,a.jsxs)(D.wL,{className:"w-full flex items-center gap-3",children:[(null==s?void 0:s.status)!=C.w8.READY&&(0,a.jsx)(E.$,{className:"flex-1",onClick:()=>r(C.w8.CANCLED,s),children:"Cancle"}),(0,a.jsx)(E.$,{className:"flex-1 bg-gray-200 text-gray-600 hover:bg-gray-300",onClick:()=>{(null==s?void 0:s.status)===C.w8.PENDING?r(C.w8.PROCESSING,s):(null==s?void 0:s.status)===C.w8.PROCESSING?r(C.w8.READY,s):(null==s?void 0:s.status)===C.w8.READY&&r(C.w8.COMPLETED,s)},children:(null==s?void 0:s.status)===C.w8.PENDING?"Start":(null==s?void 0:s.status)==C.w8.PROCESSING?"Finish":"Completed"})]})]})}function P(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[o,i]=(0,r.useState)([]),c=(0,j.W)(),{user:d}=(0,n.A)(),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!d&&!(null==d?void 0:d.shop))return;let e=localStorage.getItem("access");return u.current=new WebSocket("ws://localhost:8000/ws/orders/".concat(d.shop,"/?token=").concat(e)),u.current.onmessage=e=>{console.log(e);let s=JSON.parse(e.data);console.log(s),s.status==C.w8.PROCESSING?(t(e=>e.filter(e=>e.id!=s.id)),l(e=>[...e,{...s}])):s.status==C.w8.READY?(l(e=>e.filter(e=>e.id!=s.id)),i(e=>[...e,{...s}])):s.status==C.w8.COMPLETED?i(e=>e.filter(e=>e.id!=s.id)):s.status==C.w8.CANCLED?(t(e=>e.filter(e=>e.id!=s.id)),l(e=>e.filter(e=>e.id!=s.id)),i(e=>e.filter(e=>e.id!=s.id))):t(e=>[...e,{...s}])},()=>{u.current&&u.current.close()}},[]);let x=e=>{m.getKichenDisplay({page:c.page,page_size:1e3,status:e}).then(s=>{e==C.w8.PENDING?t(s.data.data.results):e==C.w8.PROCESSING?l(s.data.data.results):e==C.w8.READY&&i(s.data.data.results)}).catch(e=>{console.log(e)})},f=(e,t)=>{(null==t?void 0:t.id)&&u.current&&u.current.readyState==WebSocket.OPEN&&u.current.send(JSON.stringify({method:e,order_id:t.id}))};return(0,r.useEffect)(()=>{x(C.w8.PENDING),x(C.w8.PROCESSING),x(C.w8.READY)},[]),(0,a.jsxs)("div",{className:"w-full flex gap-5 ",children:[(0,a.jsx)("div",{className:"flex-1 flex flex-col gap-3 ",children:e.length>0&&e.map(e=>(0,a.jsx)(z,{order:e,handleStatusChange:f},e.id))}),(0,a.jsx)("div",{className:"flex-1 flex flex-col gap-3",children:s.length>0&&s.map(e=>(0,a.jsx)(z,{order:e,handleStatusChange:f},e.id))}),(0,a.jsx)("div",{className:"flex-1 flex flex-col gap-3",children:o.length>0&&o.map(e=>(0,a.jsx)(z,{order:e,handleStatusChange:f},e.id))})]})}function R(){let{isAuthenticated:e,user:t}=(0,n.A)(),s=(0,l.useRouter)();return(0,r.useEffect)(()=>{e||s.push("/login"),(null==t?void 0:t.role)=="user"&&s.push("/")},[e]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(A,{defaultValue:"dashboard",className:"w-full px-2 lg:px-12 pb-10",children:[(0,a.jsxs)(S,{className:"mt-6 flex gap-6 w-full bg-trnsparent h-16",children:[(0,a.jsx)(_,{value:"dashboard",className:"text-[28px] font-medium text-gray-500",children:"Dashboad"}),(0,a.jsx)(_,{value:"display",className:"text-[28px] font-medium text-gray-500",children:"Display"})]}),(0,a.jsxs)(k,{value:"dashboard",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center  py-12",children:[(0,a.jsx)("span",{className:"text-[28px] font-normal",children:"Dashboard"}),(0,a.jsx)("div",{children:(0,a.jsxs)(o.l6,{onValueChange:e=>{console.log(e)},children:[(0,a.jsx)(o.bq,{className:"w-[180px] bg-white rounded-lg py-6",children:(0,a.jsx)(o.yv,{placeholder:"Showing:"})}),(0,a.jsx)(o.gC,{children:(0,a.jsxs)(o.s3,{children:[(0,a.jsx)(o.TR,{}),(0,a.jsx)(o.eb,{value:"this_year",children:"This Year"}),(0,a.jsx)(o.eb,{value:"last_30_days",children:"Last 30 days"}),(0,a.jsx)(o.eb,{value:"last_7_days",children:"Last 7 days"})]})})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-8  lg:flex-row",children:[(0,a.jsxs)("div",{className:"flex-1 lg:flex-2/3 flex flex-col  gap-10 px-2 lg:px-0",children:[(0,a.jsx)(h,{}),(0,a.jsx)(b,{})]}),(0,a.jsx)("div",{className:"flex-1 lg:flex-1/3 px-2 lg:px-0",children:(0,a.jsx)(w,{})})]})]}),(0,a.jsx)(k,{value:"display",children:(0,a.jsx)(P,{})})]})})}},9550:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>i});var a=s(5155),r=s(2115),n=s(2107),l=s(3568);let o=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=localStorage.getItem("access");e&&(i(e),n.D.getCurrentUser().then(e=>{d(e.data.data)}).catch(e=>{console.error("Failed to fetch current user:",e),d(null)}))},[]),(0,a.jsx)(o.Provider,{value:{user:c,accessToken:s,isAuthenticated:!!s,login:e=>{i(e),n.D.getCurrentUser().then(e=>{d(e.data.data)}).catch(e=>{l.Ay.error("failed to fetch current user")})},logout:()=>{localStorage.removeItem("access"),i(null),d(null)}},children:t})},c=()=>{let e=(0,r.useContext)(o);if(void 0==e)throw Error("useAuth must be used within an Authprovider");return e}}},e=>{e.O(0,[7567,397,2128,8795,9196,902,8642,8441,5964,7358],()=>e(e.s=4952)),_N_E=e.O()}]);