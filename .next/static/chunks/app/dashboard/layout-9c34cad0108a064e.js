(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{2107:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var a=r(5784);let s={registerUser:function(e){return a.A.post("/register/",e)},login:l,logout:x,getCurrentUser:n,changePassword:i,getUsers:o,forgetPassword:d,resetPassword:c,updateProfile:m};async function l(e){return await a.A.post("/token/",e)}async function n(){return await a.A.get("/me/")}async function i(e){return await a.A.put("/change-password/",e)}async function o(e){return await a.A.get("/users/",{params:{...e}})}async function d(e){return await a.A.post("/password-reset/",{email:e})}async function c(e){return await a.A.post("/password-reset/confirm/?token=".concat(e.token),e)}async function m(e){return await a.A.patch("/update-profile/".concat(e.id,"/"),e)}async function x(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}},2175:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>W});var a=r(5155),s=r(3783),l=r(1007),n=r(4135),i=r(3737),o=r(7632),d=r(153),c=r(9140),m=r(3338),x=r(1366),u=r(5112),h=r(6766),f=r(6874),w=r.n(f),p=r(5695),j=r(9550),b=r(5765);function g(e){let{setOpen:t}=e,r=(0,p.usePathname)(),{user:f}=(0,j.A)();return(0,a.jsx)("div",{className:"w-full py-10",children:(0,a.jsxs)("div",{className:"w-full  flex flex-col items-center",children:[(0,a.jsx)(h.default,{className:"text-white mb-10",src:"/globe.svg",alt:"Next.js logo",width:100,height:38,priority:!0}),(0,a.jsxs)("div",{className:"w-full text-white",children:[(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard"==r?"bg-white text-black":"text-white"," "),href:"/dashboard",children:[(0,a.jsx)(s.A,{className:"mr-6"}),"Dashboard"]}),f&&((null==f?void 0:f.role)==b.tX.ADMIN||(null==f?void 0:f.role)==b.tX.ORGANIZATION_ADMIN)&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/users"==r?"bg-white text-black":"text-white"," "),href:"/dashboard/users",children:[(0,a.jsx)(l.A,{className:"mr-6"}),"User"]}),f&&(null==f?void 0:f.role)==b.tX.ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/organizations"==r?"bg-white text-black":"text-white"," "),href:"/dashboard/organizations",children:[(0,a.jsx)(n.A,{className:"mr-6"}),"Organizations"]}),f&&(null==f?void 0:f.role)==b.tX.ORGANIZATION_ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/shops"==r?"bg-white text-black":"text-white"),href:"/dashboard/shops",children:[(0,a.jsx)(i.A,{className:"mr-6"}),"Shops"]}),f&&(null==f?void 0:f.role)==b.tX.SHOP_ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/categories"==r?"bg-white text-black":"text-white"),href:"/dashboard/categories",children:[(0,a.jsx)(o.A,{className:"mr-6"}),"Categories"]}),f&&(null==f?void 0:f.role)==b.tX.SHOP_ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/menu"==r?"bg-white text-black":"text-white"),href:"/dashboard/menu",children:[(0,a.jsx)(d.A,{className:"mr-6"}),"Menu"]}),f&&(null==f?void 0:f.role)==b.tX.SHOP_ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/orders"==r?"bg-white text-black":"text-white"),href:"/dashboard/orders",children:[(0,a.jsx)(c.A,{className:"mr-6"}),"Orders"]}),f&&(null==f?void 0:f.role)==b.tX.SHOP_ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/feedbacks"==r?"bg-white text-black":"text-white"),href:"/dashboard/feedbacks",children:[(0,a.jsx)(m.A,{className:"mr-6"}),"FeedBacks"]}),f&&(null==f?void 0:f.role)==b.tX.SHOP_ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-10 hover:bg-white hover:text-black py-4 ".concat("/dashboard/chats"==r?"bg-white text-black":"text-white"),href:"/dashboard/chats",children:[(0,a.jsx)(x.A,{className:"mr-6"})," Chat"]}),f&&(null==f?void 0:f.role)==b.tX.SHOP_ADMIN&&(0,a.jsxs)(w(),{onClick:()=>t(!1),className:"w-full flex items-center mt-5 justify-start px-7 hover:bg-white hover:text-black py-4 ".concat("/dashboard/dining-tables"==r?"bg-white text-black":"text-white"),href:"/dashboard/dining-tables",children:[(0,a.jsx)(u.A,{className:"mr-6"}),"Dining Tables"]})]})]})})}var v=r(6422),N=r(381),y=r(3319),k=r(7133),A=r(2115),_=r(9840),C=r(6037),S=r(9540),I=r(2177),O=r(9852),P=r(7168),D=r(2107),M=r(3568);function R(e){let{setOpen:t}=e,r=(0,I.mN)(),[s,l]=(0,A.useState)(!1),[n,i]=(0,A.useState)(!0);return(0,a.jsx)(S.lV,{...r,children:(0,a.jsxs)("form",{onSubmit:r.handleSubmit(e=>{l(!0),D.D.changePassword(e).then(e=>{l(!1),e.data.data.error?M.Ay.error(e.data.data.error):(M.Ay.success(e.data.data.message),t(!1))}).catch(e=>{console.log(e),l(!1)})}),children:[(0,a.jsxs)(S.eI,{className:"mt-4",children:[(0,a.jsx)(S.lR,{children:"Old Password"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{placeholder:"Old password",type:"password",...r.register("old_password",{required:"old_password is required field"})})}),r.formState.errors.old_password&&(0,a.jsx)(S.Rr,{className:"text-red text-sm",children:r.formState.errors.old_password.message}),(0,a.jsx)(S.C5,{})]}),(0,a.jsxs)(S.eI,{className:"mt-3",children:[(0,a.jsx)(S.lR,{children:"New Password"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{placeholder:"new password",type:"password",...r.register("new_password",{required:"new password is requird field"})})}),r.formState.errors.new_password&&(0,a.jsx)(S.Rr,{children:r.formState.errors.new_password.message})]}),(0,a.jsxs)(S.eI,{className:"mt-3",children:[(0,a.jsx)(S.lR,{children:"Confirm Password"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{placeholder:"confirm_password",type:"password",...r.register("confirm_password",{required:"confirm password is required field"}),onChange:e=>i(e.target.value==r.getValues("new_password"))})}),n?"":(0,a.jsx)(S.C5,{className:"text-red-600 text-sm",children:"password is not match"})]}),(0,a.jsx)(P.$,{type:"submit",className:"mt-4 hover:bg-gray-600",children:s?(0,a.jsx)("span",{className:"inline-block w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}):"Change Password"})]})})}function E(e){let{setOpenProfile:t}=e,{user:r}=(0,j.A)(),s=(0,I.mN)({defaultValues:{...r}});return(0,a.jsx)("div",{children:(0,a.jsx)(S.lV,{...s,children:(0,a.jsxs)("form",{onSubmit:s.handleSubmit(e=>{D.D.updateProfile(e).then(e=>{window.location.reload()}).catch(e=>{})}),className:"",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center mt-10 ",children:[(0,a.jsxs)(S.eI,{className:"mr-3",children:[(0,a.jsx)(S.lR,{children:"Username"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{className:"py-4",placeholder:"username",...s.register("username",{required:"username is required field"})})}),s.formState.errors.username&&(0,a.jsx)(S.Rr,{className:"text-red text-sm",children:s.formState.errors.username.message}),(0,a.jsx)(S.C5,{})]}),(0,a.jsxs)(S.eI,{className:"",children:[(0,a.jsx)(S.lR,{children:"First Name"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{placeholder:"first_name",...s.register("first_name",{required:"first name is required field"})})}),s.formState.errors.first_name&&(0,a.jsx)(S.Rr,{className:"text-red text-sm",children:s.formState.errors.first_name.message}),(0,a.jsx)(S.C5,{})]})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center mt-10",children:[(0,a.jsxs)(S.eI,{className:"mr-3",children:[(0,a.jsx)(S.lR,{children:"Middle Name"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{placeholder:"middle name",...s.register("middle_name",{required:"middle name is required field"})})}),s.formState.errors.middle_name&&(0,a.jsx)(S.Rr,{className:"text-red text-sm",children:s.formState.errors.middle_name.message}),(0,a.jsx)(S.C5,{})]}),(0,a.jsxs)(S.eI,{className:"",children:[(0,a.jsx)(S.lR,{children:"Last Name"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{placeholder:"last_name",...s.register("last_name",{required:"last name is required field"})})}),s.formState.errors.last_name&&(0,a.jsx)(S.Rr,{className:"text-red text-sm",children:s.formState.errors.last_name.message}),(0,a.jsx)(S.C5,{})]})]}),(0,a.jsxs)(S.eI,{className:"mt-10",children:[(0,a.jsx)(S.lR,{children:"Contact Number"}),(0,a.jsx)(S.MJ,{children:(0,a.jsx)(O.p,{placeholder:"contact_number",...s.register("contact_number",{required:"Contact number is required field"})})}),s.formState.errors.contact_number&&(0,a.jsx)(S.Rr,{className:"text-red text-sm",children:s.formState.errors.contact_number.message}),(0,a.jsx)(S.C5,{})]}),(0,a.jsx)(P.$,{type:"submit",className:"mt-10",children:"Update Profile"})]})})})}function q(){let{user:e,logout:t}=(0,j.A)(),[r,s]=(0,A.useState)(!1),[l,n]=(0,A.useState)(!1),i=new Date;(0,p.usePathname)();let o=(0,A.useRef)(null);return(0,A.useEffect)(()=>{if(!(null==e?void 0:e.id))return;let t=localStorage.getItem("access");return o.current=new WebSocket("ws://localhost:8000/ws/reports/".concat(e.id,"/?token=").concat(t)),console.log("WebSocket created"),console.log(o.current),o.current.onmessage=e=>{let t=JSON.parse(e.data);console.log(t),(e=>{try{let t=window.atob(e.file),r=t.length,a=new Uint8Array(r);for(let e=0;e<r;e++)a[e]=t.charCodeAt(e);let s=new Blob([a],{type:"application/pdf"}),l=URL.createObjectURL(s);window.open(l)}catch(e){console.error("Failed to decode Base64 PDF:",e)}})(t)},()=>{o.current&&o.current.close()}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full flex items-center justify-between px-10 py-5 bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center text-[20px]",children:[(0,a.jsx)(v.A,{className:"mr-4 cursor-pointer",size:32}),(0,a.jsxs)("span",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-[14px] font-medium",children:null==e?void 0:e.username}),(0,a.jsx)("span",{className:"font-normal text-gray-700 text-[12px]",children:null==e?void 0:e.role})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"flex flex-col  border-r-2 px-2",children:[(0,a.jsx)("span",{className:"text-[14px] font-medium",children:(0,y.GP)(i,"h:mm a")}),(0,a.jsx)("span",{className:"font-normal text-gray-700 text-[12px]",children:(0,y.GP)(i,"dd-mm-yyyy")})]}),(0,a.jsxs)(k.rI,{children:[(0,a.jsx)(k.ty,{children:(0,a.jsx)(N.A,{className:"ml-4 cursor-pointer",size:32})}),(0,a.jsxs)(k.SQ,{className:"w-56",children:[(0,a.jsx)(k._2,{onClick:()=>n(!0),children:"Update Profile"}),(0,a.jsx)(k._2,{children:"Notifications"}),(0,a.jsx)(k._2,{onClick:()=>s(!0),children:"Change Password"}),(0,a.jsx)(k._2,{onClick:t,children:"Logout"})]})]})]})]}),(0,a.jsx)(_.lG,{open:r,onOpenChange:s,children:(0,a.jsxs)(_.Cf,{children:[(0,a.jsxs)(_.c7,{children:[(0,a.jsx)(_.L3,{children:"Change Password"}),(0,a.jsx)(C.w,{})]}),(0,a.jsx)(R,{setOpen:s})]})}),(0,a.jsx)(_.lG,{open:l,onOpenChange:n,children:(0,a.jsxs)(_.Cf,{children:[(0,a.jsxs)(_.c7,{children:[(0,a.jsx)(_.L3,{children:"Update Profile"}),(0,a.jsx)(C.w,{})]}),(0,a.jsx)(E,{setOpenProfile:n})]})})]})}var z=r(9474),U=r(3999);function X(e){let{...t}=e;return(0,a.jsx)(z._s.Root,{"data-slot":"drawer",...t})}function G(e){let{...t}=e;return(0,a.jsx)(z._s.Trigger,{"data-slot":"drawer-trigger",...t})}function J(e){let{...t}=e;return(0,a.jsx)(z._s.Portal,{"data-slot":"drawer-portal",...t})}function T(e){let{...t}=e;return(0,a.jsx)(z._s.Close,{"data-slot":"drawer-close",...t})}function H(e){let{className:t,...r}=e;return(0,a.jsx)(z._s.Overlay,{"data-slot":"drawer-overlay",className:(0,U.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function L(e){let{className:t,children:r,...s}=e;return(0,a.jsxs)(J,{"data-slot":"drawer-portal",children:[(0,a.jsx)(H,{}),(0,a.jsxs)(z._s.Content,{"data-slot":"drawer-content",className:(0,U.cn)("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...s,children:[(0,a.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),r]})]})}function F(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"drawer-header",className:(0,U.cn)("flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",t),...r})}function V(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"drawer-footer",className:(0,U.cn)("mt-auto flex flex-col gap-2 p-4",t),...r})}function B(e){let{className:t,...r}=e;return(0,a.jsx)(z._s.Title,{"data-slot":"drawer-title",className:(0,U.cn)("text-foreground font-semibold",t),...r})}var Z=r(4783),$=r(4416);function W(e){let{children:t}=e,[r,s]=(0,A.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-[#E3E3E3]  min-h-screen",children:[(0,a.jsx)(Z.A,{size:32,className:"lg:hidden absolute top-6 left-3 ",onClick:()=>s(!0)}),(0,a.jsx)("div",{className:"w-[200px] hidden lg:block h-full fixed top-0 bg-black",children:(0,a.jsx)(g,{setOpen:s})}),(0,a.jsxs)("div",{className:"ml-0 lg:ml-[200px] ",children:[(0,a.jsx)(q,{}),t]})]}),(0,a.jsxs)(X,{direction:"left",open:r,onOpenChange:s,children:[(0,a.jsx)(G,{asChild:!0}),(0,a.jsxs)(L,{className:"h-full w-3/4 mt-0 bg-black",children:[" ",(0,a.jsx)(F,{children:(0,a.jsxs)(B,{className:"flex items-center justify-end",children:[" ",(0,a.jsx)($.A,{className:"bg-white w-8 h-8 rounded-full  ",size:32,onClick:()=>s(!1)})]})}),(0,a.jsx)(g,{setOpen:s}),(0,a.jsx)(V,{children:(0,a.jsx)(T,{asChild:!0,children:(0,a.jsx)(P.$,{variant:"outline",children:"Close Drawer"})})})]})]})]})}},2213:(e,t,r)=>{Promise.resolve().then(r.bind(r,2175))},5765:(e,t,r)=>{"use strict";r.d(t,{Hc:()=>n,Mx:()=>l,tX:()=>a,w8:()=>s});var a=function(e){return e.ADMIN="admin",e.ORGANIZATION_ADMIN="organization_admin",e.SHOP_ADMIN="shop_admin",e.CUSTOMER="customer",e.USER="user",e}({}),s=function(e){return e.PENDING="pending",e.PROCESSING="processing",e.READY="ready",e.COMPLETED="completed",e.CANCLED="cancled",e}({}),l=function(e){return e.USER="user",e.SYSTEM="system",e}({});let n="https://restaurantsaasmenuimage.s3.amazonaws.com"},6037:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var a=r(5155);r(2115);var s=r(7489),l=r(3999);function n(e){let{className:t,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,a.jsx)(s.b,{"data-slot":"separator",decorative:n,orientation:r,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}},9550:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>o});var a=r(5155),s=r(2115),l=r(2107),n=r(3568);let i=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("access");e&&(o(e),l.D.getCurrentUser().then(e=>{c(e.data.data)}).catch(e=>{console.error("Failed to fetch current user:",e),c(null)}))},[]),(0,a.jsx)(i.Provider,{value:{user:d,accessToken:r,isAuthenticated:!!r,login:e=>{o(e),l.D.getCurrentUser().then(e=>{c(e.data.data)}).catch(e=>{n.Ay.error("failed to fetch current user")})},logout:()=>{localStorage.removeItem("access"),o(null),c(null)}},children:t})},d=()=>{let e=(0,s.useContext)(i);if(void 0==e)throw Error("useAuth must be used within an Authprovider");return e}},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var a=r(5155);r(2115);var s=r(3999);function l(e){let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}}},e=>{e.O(0,[7567,397,2177,7244,6766,2128,8795,9196,8345,5206,9857,8441,5964,7358],()=>e(e.s=2213)),_N_E=e.O()}]);