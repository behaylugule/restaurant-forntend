(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9046],{578:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var t=r(5155),a=r(9550),n=r(2115),i=r(5695),l=r(8524),d=r(5623),o=r(6839),c=r(3717),u=r(4543),h=r(8698),x=r(7133),m=r(823),j=r(7168),p=r(9840),g=r(9540),f=r(2177),b=r(9852),v=r(3568);function N(e){var s,r,a,i,l;let{setOpen:d,getOrganizations:o,actionType:c="add",organizationDetail:h}=e,x=(0,f.mN)({defaultValues:{...h}}),[m,p]=(0,n.useState)(!1);return(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(g.lV,{...x,children:(0,t.jsxs)("form",{onSubmit:x.handleSubmit(e=>{"add"===c?(p(!0),u.O.addOrganizations(e).then(()=>{v.Ay.success("Book has been created sucessfuly"),p(!1),d(!1),o()}).catch(e=>{p(!1),console.log(e)})):"edit"===c&&u.O.updateOrganizations(e).then(()=>{v.Ay.success("Book has been updated sucessfuly"),p(!1),d(!1),o()}).catch(e=>{console.log(e)})}),children:[(0,t.jsxs)(g.eI,{className:"",children:[(0,t.jsx)(g.lR,{children:"name"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(b.p,{placeholder:"name",...x.register("name",{required:"name is required field"})})}),x.formState.errors.name&&(0,t.jsx)(g.Rr,{className:"text-red text-sm",children:x.formState.errors.name.message}),(0,t.jsx)(g.C5,{})]}),(0,t.jsxs)(g.eI,{className:"mt-4",children:[(0,t.jsx)(g.lR,{children:"code"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(b.p,{placeholder:"code",...x.register("code",{required:"code is required field"})})}),x.formState.errors.code&&(0,t.jsx)(g.Rr,{className:"text-red text-sm",children:null==(s=x.formState.errors.code)?void 0:s.message})]}),(0,t.jsxs)(g.eI,{className:"mt-4",children:[(0,t.jsx)(g.lR,{children:"description"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(b.p,{placeholder:"description",...x.register("description",{required:"description is required field"})})}),x.formState.errors.code&&(0,t.jsx)(g.Rr,{className:"text-red text-sm",children:null==(r=x.formState.errors.description)?void 0:r.message})]}),(0,t.jsxs)(g.eI,{className:"mt-4 mb-4",children:[(0,t.jsx)(g.lR,{children:"contact_number"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(b.p,{placeholder:"contact_number",...x.register("contact_number",{required:"contact_number is required field"})})}),x.formState.errors.contact_number&&(0,t.jsx)(g.Rr,{className:"text-red text-sm",children:null==(a=x.formState.errors.contact_number)?void 0:a.message})]}),(0,t.jsxs)(g.eI,{className:"mt-4 mb-4",children:[(0,t.jsx)(g.lR,{children:"address"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(b.p,{placeholder:"address",...x.register("address",{required:"address is required field"})})}),x.formState.errors.address&&(0,t.jsx)(g.Rr,{className:"text-red text-sm",children:null==(i=x.formState.errors.address)?void 0:i.message})]}),(0,t.jsxs)(g.eI,{className:"mt-4 mb-4",children:[(0,t.jsx)(g.lR,{children:"website"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(b.p,{placeholder:"website",...x.register("website",{required:"adwebsitedress is required field"})})}),x.formState.errors.website&&(0,t.jsx)(g.Rr,{className:"text-red text-sm",children:null==(l=x.formState.errors.website)?void 0:l.message})]}),(0,t.jsx)(j.$,{type:"submit",className:"mt-4 hover:bg-gray-600",children:m?(0,t.jsx)("span",{className:"inline-block w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}):"edit"==c?"Update Book":"Add Book"})]})})})}var y=r(6037),A=r(5411),w=r(405),z=r(854),S=r(1412);function k(){let{isAuthenticated:e}=(0,a.A)(),s=(0,i.useRouter)(),[r,g]=(0,n.useState)([]),[f,b]=(0,n.useState)(!1),[k,O]=(0,n.useState)(!1),[R,C]=(0,n.useState)("add"),[q,P]=(0,n.useState)(),[_,M]=(0,n.useState)(),I=(0,w.W)();(0,n.useEffect)(()=>{e||s.push("/login")},[e]),(0,n.useEffect)(()=>{E()},[I.page,_]);let E=()=>{u.O.getOrganizations({page:I.page,page_size:I.pageSize,..._}).then(e=>{b(!1),g(e.data.data.results),I.setTotalCount(e.data.data.count)}).catch(e=>{b(!1),console.log(e)})},J=async e=>{b(!0),u.O.deleteOrganizations(e).then(s=>{b(!1),g(s=>s.filter(s=>(null==s?void 0:s.id)!==e))}).catch(e=>{b(!1),console.log(e)})};return(0,n.useEffect)(()=>{k||(P({id:"",name:"",code:"",description:"",address:"",website:""}),C("add"))},[k]),(0,t.jsxs)("div",{className:"w-full px-2 lg:px-12",children:[(0,t.jsxs)("div",{className:"flex justify-between bg-white items-center my-2 py-4",children:[(0,t.jsx)("div",{className:"flex-6/7",children:(0,t.jsx)(z.A,{config:[{label:"search",name:"search",type:"text"}],generateReport:()=>{S.N.generateOrgReport(_).then(e=>{v.Ay.success(e.data.data.message)}).catch(e=>{console.log(e)})},onFilterChange:e=>{M({...e})}})}),(0,t.jsx)("div",{className:"flex-1/7",children:(0,t.jsxs)(p.lG,{open:k,onOpenChange:O,children:[(0,t.jsx)(p.zM,{className:"bg-black hover:bg-gray-500 cursor-pointer text-white px-4 py-2 rounded-lg shadow-lg",children:"Add Organization"}),(0,t.jsxs)(p.Cf,{children:[(0,t.jsx)(p.c7,{children:(0,t.jsx)(p.L3,{children:"Add Organizations"})}),(0,t.jsx)(y.w,{}),(0,t.jsx)(N,{setOpen:O,getOrganizations:E,actionType:R,organizationDetail:q})]})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col justify-center ",children:[(0,t.jsxs)(l.XI,{className:"bg-white",children:[(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{children:"ID"}),(0,t.jsx)(l.nd,{children:"Name"}),(0,t.jsx)(l.nd,{children:"Code"}),(0,t.jsx)(l.nd,{children:"Description"}),(0,t.jsx)(l.nd,{children:"Address"}),(0,t.jsx)(l.nd,{children:"Website"}),(0,t.jsx)(l.nd,{children:"Action"})]})}),(0,t.jsx)(l.BF,{children:!f&&r.map((e,s)=>(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{children:null==e?void 0:e.id}),(0,t.jsx)(l.nA,{children:null==e?void 0:e.name}),(0,t.jsx)(l.nA,{children:null==e?void 0:e.code}),(0,t.jsx)(l.nA,{children:null==e?void 0:e.description}),(0,t.jsx)(l.nA,{children:null==e?void 0:e.address}),(0,t.jsx)(l.nA,{children:null==e?void 0:e.website}),(0,t.jsx)(l.nA,{children:(0,t.jsxs)(h.rI,{children:[(0,t.jsx)(x.ty,{children:(0,t.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsxs)(x.SQ,{className:"w-18",children:[(0,t.jsx)(x.lp,{className:"flex items-center text-gray-700 cursor-pointer",children:(0,t.jsxs)(m.AM,{children:[(0,t.jsxs)(m.Wv,{className:"flex items-center text-gray-700 cursor-pointer",children:[(0,t.jsx)(o.A,{className:"mr-4 text-[12px]"}),"Delete"]}),(0,t.jsxs)(m.hl,{className:"w-64",children:["are you sure to delete this book?",(0,t.jsxs)("div",{className:"flex justify-center mt-4",children:[(0,t.jsx)(j.$,{className:"text-red-600 bg-transparent outline-red-600",children:"No"}),(0,t.jsx)(j.$,{className:"text-green-600 bg-transparent outline-green-600",onClick:()=>J(e.id),children:"Yes"})]})]})]})}),(0,t.jsxs)(x.lp,{className:"flex item-center text-gray-700 cursor-pointer",onClick:()=>{P(e),C("edit"),O(!0)},children:[(0,t.jsx)(c.A,{className:"mr-4 text-[12px]"}),"Update"]})]})]})})]},s))})]}),(0,t.jsx)(A.dK,{className:"self-start",children:(0,t.jsxs)(A.Iu,{children:[(0,t.jsx)(A.cU,{onClick:f?void 0:I.handlePrevPage,children:(0,t.jsx)(A.Eb,{})}),I.totalCount>0&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(A.cU,{children:(0,t.jsxs)(A.n$,{children:["Total:",I.totalCount]})})}),(0,t.jsx)(A.cU,{onClick:f?void 0:I.handleNextPage,className:0===r.length?"pointer-events-none opacity-50 ":"",children:(0,t.jsx)(A.WA,{})})]})})]})]})}},3717:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4543:(e,s,r)=>{"use strict";r.d(s,{O:()=>a});var t=r(5784);let a={getOrganization:function(e){return t.A.get("/organizations/"+e)},getOrganizations:function(e){return t.A.get("/organizations/",{params:{...e}})},addOrganizations:function(e){return t.A.post("/organizations/",e)},updateOrganizations:function(e){return t.A.patch("/organizations/"+e.id+"/",e)},deleteOrganizations:function(e){return t.A.delete("/organizations/"+e+"/")},getOrganizationsCountWithCategory:n};async function n(e){let{page:s,search:r="",page_size:a}=e;return await t.A.get("/books/count-by-category/",{params:{page:s,page_size:a,search:r}})}},5307:(e,s,r)=>{Promise.resolve().then(r.bind(r,578))},5695:(e,s,r)=>{"use strict";var t=r(8999);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},6037:(e,s,r)=>{"use strict";r.d(s,{w:()=>i});var t=r(5155);r(2115);var a=r(7489),n=r(3999);function i(e){let{className:s,orientation:r="horizontal",decorative:i=!0,...l}=e;return(0,t.jsx)(a.b,{"data-slot":"separator",decorative:i,orientation:r,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...l})}},6839:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]])},7489:(e,s,r)=>{"use strict";r.d(s,{b:()=>o});var t=r(2115),a=r(3655),n=r(5155),i="horizontal",l=["horizontal","vertical"],d=t.forwardRef((e,s)=>{var r;let{decorative:t,orientation:d=i,...o}=e,c=(r=d,l.includes(r))?d:i;return(0,n.jsx)(a.sG.div,{"data-orientation":c,...t?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:s})});d.displayName="Separator";var o=d},9852:(e,s,r)=>{"use strict";r.d(s,{p:()=>n});var t=r(5155);r(2115);var a=r(3999);function n(e){let{className:s,type:r,...n}=e;return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}}},e=>{e.O(0,[7567,397,2177,2128,8795,9196,8345,8467,9857,5715,8441,5964,7358],()=>e(e.s=5307)),_N_E=e.O()}]);