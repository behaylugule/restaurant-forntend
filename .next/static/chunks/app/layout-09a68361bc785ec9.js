(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{2107:(e,t,r)=>{"use strict";r.d(t,{D:()=>o});var a=r(5784);let o={registerUser:function(e){return a.A.post("/register/",e)},login:n,logout:m,getCurrentUser:s,changePassword:i,getUsers:c,forgetPassword:l,resetPassword:u,updateProfile:d};async function n(e){return await a.A.post("/token/",e)}async function s(){return await a.A.get("/me/")}async function i(e){return await a.A.put("/change-password/",e)}async function c(e){return await a.A.get("/users/",{params:{...e}})}async function l(e){return await a.A.post("/password-reset/",{email:e})}async function u(e){return await a.A.post("/password-reset/confirm/?token=".concat(e.token),e)}async function d(e){return await a.A.patch("/update-profile/".concat(e.id,"/"),e)}async function m(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}},4020:(e,t,r)=>{Promise.resolve().then(r.bind(r,9550)),Promise.resolve().then(r.bind(r,6862)),Promise.resolve().then(r.t.bind(r,5688,23)),Promise.resolve().then(r.t.bind(r,9432,23)),Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.t.bind(r,8413,23)),Promise.resolve().then(r.bind(r,3568))},5688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},5784:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(3464),o=r(3568);let n="http://localhost:8000/api",s=a.A.create({baseURL:n});s.interceptors.request.use(e=>{console.log("base URL",n);{let t=localStorage.getItem("access");t&&(e.headers.Authorization="Bearer ".concat(t))}return"post"!==e.method&&"put"!==e.method&&"patch"!==e.method||e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{var t,r,s;let i=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!i._retry){i._retry=!0;try{localStorage.getItem("refresh");let e=await a.A.post(n+"/token/refresh");localStorage.setItem("access",e.data.access),i.headers.Authorization="Bearer ".concat(e.data.access)}catch(e){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}}return console.log("Error response:",e.response),o.Ay.error((null==(s=e.response)||null==(r=s.data)?void 0:r.message)||"An error occurred"),Promise.reject(e)});let i=s},6862:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>s,_:()=>i});var a=r(5155),o=r(2115);let n=(0,o.createContext)(void 0),s=e=>{let{children:t}=e,[r,s]=(0,o.useState)([]),i=(0,o.useMemo)(()=>r.reduce((e,t)=>e+t.price*t.quantity,0),[r]),c=(0,o.useMemo)(()=>r.reduce((e,t)=>e+t.quantity,0),[r]);return(0,a.jsx)(n.Provider,{value:{cartItems:r,addToCart:e=>{s(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:e=>{s(t=>t.filter(t=>t.id!==e))},updateQuantity:(e,t)=>{s(r=>r.map(r=>r.id===e?{...r,quantity:t}:r))},incrementQuantity:e=>{s(t=>t.map(t=>t.id===e?{...t,quantity:t.quantity+1}:t))},decrementQuantity:e=>{s(t=>t.map(t=>t.id===e?{...t,quantity:t.quantity>1?t.quantity-1:1}:t))},getById:e=>r.find(t=>t.id===e),clearCart:()=>s([]),totalPrice:i,totalQuantity:c},children:t})},i=()=>{let e=(0,o.useContext)(n);if(!e)throw Error("useCart must be used within a CartProvider");return e}},8413:()=>{},9324:()=>{},9432:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},9550:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>c});var a=r(5155),o=r(2115),n=r(2107),s=r(3568);let i=(0,o.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,o.useState)(null),[l,u]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=localStorage.getItem("access");e&&(c(e),n.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{console.error("Failed to fetch current user:",e),u(null)}))},[]),(0,a.jsx)(i.Provider,{value:{user:l,accessToken:r,isAuthenticated:!!r,login:e=>{c(e),n.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{s.Ay.error("failed to fetch current user")})},logout:()=>{localStorage.removeItem("access"),c(null),u(null)}},children:t})},l=()=>{let e=(0,o.useContext)(i);if(void 0==e)throw Error("useAuth must be used within an Authprovider");return e}}},e=>{e.O(0,[6114,7567,8441,5964,7358],()=>e(e.s=4020)),_N_E=e.O()}]);