(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6579],{632:(e,t,r)=>{Promise.resolve().then(r.bind(r,4534))},2107:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var a=r(5784);let s={registerUser:function(e){return a.A.post("/register/",e)},login:o,logout:m,getCurrentUser:n,changePassword:l,getUsers:c,forgetPassword:i,resetPassword:u,updateProfile:d};async function o(e){return await a.A.post("/token/",e)}async function n(){return await a.A.get("/me/")}async function l(e){return await a.A.put("/change-password/",e)}async function c(e){return await a.A.get("/users/",{params:{...e}})}async function i(e){return await a.A.post("/password-reset/",{email:e})}async function u(e){return await a.A.post("/password-reset/confirm/?token=".concat(e.token),e)}async function d(e){return await a.A.patch("/update-profile/".concat(e.id,"/"),e)}async function m(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}},4534:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(6766),o=r(6874),n=r.n(o),l=r(2177),c=r(2107),i=r(2115),u=r(3568),d=r(5695),m=r(9550);function h(){var e;let{register:t,handleSubmit:r,getValues:o,formState:{errors:h}}=(0,l.mN)(),[f,g]=(0,i.useState)(!1),{isAuthenticated:p}=(0,m.A)(),x=(0,d.useRouter)(),b=async e=>{g(!0),c.D.forgetPassword(e.email).then(e=>{g(!1),x.push("/confrimation/?email=".concat(o("email")))}).catch(e=>{u.Ay.error(e.response.data.message),g(!1)})};return(0,i.useEffect)(()=>{p&&x.push("/login")},[p]),(0,a.jsx)("div",{className:"w-full h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"w-full lg:w-3/4 xl:w-1/2  lg:bg-white flex justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 hidden lg:flex flex-col items-center justify-center py-12 px-10 bg-black rounded-r-4xl",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(s.default,{className:"dark:invert",src:"/globe.svg",alt:"Vercel logomark",width:100,height:38}),(0,a.jsx)("h3",{className:"font-montserrat font-medium text-[23px] text-white text-center my-8 tracking-[12px]",children:"BookWarm"})]}),(0,a.jsx)("span",{className:"text-[14px]  text-white my-8 font-light w-[250px] text-center",children:" Your premier digital library for borrowing and reading books."})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-4 mb-8 py-12 px-10 relative",children:[(0,a.jsx)(s.default,{className:"dark:invert",src:"/globe.svg",alt:"Next.js logo",width:100,height:30,priority:!0}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h3",{className:"font-montserrat font-medium text-[23px] text-gray-900 text-center dark:text-white my-8 tracking-[12px]",children:"Forget Password"}),(0,a.jsx)("span",{className:"w-full text-center mb-8 font-normal text-[14px] text-gray-700 dark:text-gray-300",children:"Please enter your username"}),(0,a.jsxs)("form",{onSubmit:r(b),className:"w-full",children:[h.email&&(0,a.jsx)("span",{className:"text-red-500",children:null==(e=h.email)?void 0:e.message}),(0,a.jsx)("input",{type:"email",id:"email",...t("email",{required:"Email is required"}),placeholder:"Email",className:"w-full h-10 px-4 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:border-blue-500"}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-black text-white text-center py-2 mt-5 font-medium rounded-lg hover:bg-black/80 transition-all duration-300 cursor-pointer",children:f?(0,a.jsx)("span",{className:"inline-block w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}):"Forget Password"})]}),(0,a.jsx)(n(),{href:"/login",className:" px-3 font-normal  text-center border border-black  text-black rounded-l-full transition-all duration-300 cursor-pointer absolute top-4 right-0",children:"BACK"})]})]})]})})}},5784:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(3464),s=r(3568);let o="http://localhost:8000/api",n=a.A.create({baseURL:o});n.interceptors.request.use(e=>{console.log("base URL",o);{let t=localStorage.getItem("access");t&&(e.headers.Authorization="Bearer ".concat(t))}return"post"!==e.method&&"put"!==e.method&&"patch"!==e.method||e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t,r,n;let l=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!l._retry){l._retry=!0;try{localStorage.getItem("refresh");let e=await a.A.post(o+"/token/refresh");localStorage.setItem("access",e.data.access),l.headers.Authorization="Bearer ".concat(e.data.access)}catch(e){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}}return console.log("Error response:",e.response),s.Ay.error((null==(n=e.response)||null==(r=n.data)?void 0:r.message)||"An error occurred"),Promise.reject(e)});let l=n},9550:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>c});var a=r(5155),s=r(2115),o=r(2107),n=r(3568);let l=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,s.useState)(null),[i,u]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("access");e&&(c(e),o.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{console.error("Failed to fetch current user:",e),u(null)}))},[]),(0,a.jsx)(l.Provider,{value:{user:i,accessToken:r,isAuthenticated:!!r,login:e=>{c(e),o.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{n.Ay.error("failed to fetch current user")})},logout:()=>{localStorage.removeItem("access"),c(null),u(null)}},children:t})},i=()=>{let e=(0,s.useContext)(l);if(void 0==e)throw Error("useAuth must be used within an Authprovider");return e}}},e=>{e.O(0,[7567,2177,7244,6766,8441,5964,7358],()=>e(e.s=632)),_N_E=e.O()}]);