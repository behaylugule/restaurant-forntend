(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3472],{405:(e,t,a)=>{"use strict";a.d(t,{W:()=>n});var r=a(2115);function n(){let e=[10,20,30,40,50],[t,a]=(0,r.useState)(1),[n,s]=(0,r.useState)(""),[o,c]=(0,r.useState)(0),[i,l]=(0,r.useState)(e[0]||10),u=(0,r.useMemo)(()=>0===i?0:Math.ceil(o/i),[o,i]);return{page:t,totalCount:o,setPage:a,setTotalCount:c,handleNextPage:()=>{t<u&&a(e=>e+1)},handlePrevPage:()=>{t>1&&a(e=>e-1)},page_sizes:e,pageSize:i,setPageSize:l,totalPages:u,search:n,setSearch:s}}},1976:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},2107:(e,t,a)=>{"use strict";a.d(t,{D:()=>n});var r=a(5784);let n={registerUser:function(e){return r.A.post("/register/",e)},login:s,logout:m,getCurrentUser:o,changePassword:c,getUsers:i,forgetPassword:l,resetPassword:u,updateProfile:d};async function s(e){return await r.A.post("/token/",e)}async function o(){return await r.A.get("/me/")}async function c(e){return await r.A.put("/change-password/",e)}async function i(e){return await r.A.get("/users/",{params:{...e}})}async function l(e){return await r.A.post("/password-reset/",{email:e})}async function u(e){return await r.A.post("/password-reset/confirm/?token=".concat(e.token),e)}async function d(e){return await r.A.patch("/update-profile/".concat(e.id,"/"),e)}async function m(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}},3999:(e,t,a)=>{"use strict";a.d(t,{D:()=>i,cn:()=>o,f:()=>c});var r=a(2596),n=a(3319),s=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function c(e){let t=new Date;e=new Date(e);let a=t.getTime()-e.getTime(),r=Math.floor(a/1e3),n=Math.floor(a/6e4),s=Math.floor(a/36e5),o=Math.floor(a/864e5),c=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return r<60?c.format(-r,"second"):n<60?c.format(-n,"minute"):s<24?c.format(-s,"hour"):c.format(-o,"day")}function i(e){return(0,n.GP)(e,"HH:mm a")}},4111:(e,t,a)=>{"use strict";a.d(t,{t:()=>n});var r=a(5784);let n={getMenus:s,getMenu:o,addMenu:c,updateMenu:i,deleteMenu:l,getMuenubyRestorantId:u};async function s(e){return await r.A.get("/menu/",{params:{...e}})}async function o(e){return await r.A.get("/menu/".concat(e,"/"))}async function c(e){return await r.A.post("/menu/",e)}async function i(e){return await r.A.patch("/menu/".concat(e.id,"/"),e)}async function l(e){return await r.A.delete("/menu/".concat(e,"/"))}async function u(e){return await r.A.get("/client/menus/".concat(e.id),{params:{category_id:e.category_id,page:e.page,page_size:e.page_size,search:e.search}})}},5765:(e,t,a)=>{"use strict";a.d(t,{Hc:()=>o,Mx:()=>s,tX:()=>r,w8:()=>n});var r=function(e){return e.ADMIN="admin",e.ORGANIZATION_ADMIN="organization_admin",e.SHOP_ADMIN="shop_admin",e.CUSTOMER="customer",e.USER="user",e}({}),n=function(e){return e.PENDING="pending",e.PROCESSING="processing",e.READY="ready",e.COMPLETED="completed",e.CANCLED="cancled",e}({}),s=function(e){return e.USER="user",e.SYSTEM="system",e}({});let o="https://restaurantsaasmenuimage.s3.amazonaws.com"},5784:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(3464),n=a(3568);let s="http://16.170.234.55/api",o=r.A.create({baseURL:s});o.interceptors.request.use(e=>{console.log("base URL",s);{let t=localStorage.getItem("access");t&&(e.headers.Authorization="Bearer ".concat(t))}return"post"!==e.method&&"put"!==e.method&&"patch"!==e.method||e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,a,o;let c=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!c._retry){c._retry=!0;try{localStorage.getItem("refresh");let e=await r.A.post(s+"/token/refresh");localStorage.setItem("access",e.data.access),c.headers.Authorization="Bearer ".concat(e.data.access)}catch(e){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}}return console.log("Error response:",e.response),n.Ay.error((null==(o=e.response)||null==(a=o.data)?void 0:a.message)||"An error occurred"),Promise.reject(e)});let c=o},6591:(e,t,a)=>{Promise.resolve().then(a.bind(a,8855))},7924:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7938:(e,t,a)=>{"use strict";a.d(t,{U:()=>n});var r=a(5784);let n={createCategory:s,getCategories:o,getCategory:c,updateCategory:i,deleteCategory:l,getMenuCategoriesForClient:u};async function s(e){return await r.A.post("/categories/",e)}async function o(e){let{page:t,page_size:a,search:n=""}=e;return await r.A.get("/categories/",{params:{page:t,search:n,page_size:a}})}async function c(e){return await r.A.get("/categories/".concat(e,"/"))}async function i(e,t){return await r.A.patch("/categories/".concat(e,"/"),t)}async function l(e){return await r.A.delete("/categories/".concat(e,"/"))}async function u(e){return await r.A.get("/client/categories/".concat(e.id),{params:{page:e.page,search:e.search,page_size:e.page_size}})}},8855:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(5155),n=a(9550),s=a(2115),o=a(5695),c=a(9852),i=a(7924),l=a(1976),u=a(6766),d=a(4111),m=a(7938),f=a(405),h=a(5765),g=a(6874),p=a.n(g);function x(){let{isAuthenticated:e,user:t}=(0,n.A)();console.log("is Auth",e),(0,o.useRouter)();let[a,g]=(0,s.useState)(""),x=(0,f.W)(),v=(0,f.W)(),w=(0,o.useParams)(),[A,y]=(0,s.useState)([]),[b,j]=(0,s.useState)([]),[N,C]=(0,s.useState)();return(0,s.useEffect)(()=>{console.log(w)},[]),(0,s.useEffect)(()=>{var e;m.U.getMenuCategoriesForClient({id:(null==(e=w.restaurantId)?void 0:e.toLocaleString())||"",page:v.page,page_size:v.pageSize,search:v.search}).then(e=>{v.setTotalCount(e.data.data.count),y(e.data.data.results),e.data.data.results.length&&g(e.data.data.results.id)}).catch(e=>{console.log(e)})},[v.page,v.search]),(0,s.useEffect)(()=>{if(null!==a){var e;d.t.getMuenubyRestorantId({id:(null==(e=w.restaurantId)?void 0:e.toLocaleString())||"",category_id:a||"",page:x.page,page_size:x.pageSize,search:x.search}).then(e=>{j(e.data.data.results),x.setTotalCount(e.data.data.count)}).catch(e=>{console.log(e)})}},[x.page,x.search,a]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"pt-20 px-4",children:[(0,r.jsx)("div",{className:"mt-4 mb-6",children:(0,r.jsx)("h3",{className:"text-[#C71F37] font-medium text-[18px] ",children:"Good morning Warren"})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,{className:"absolute left-2 top-2 text-[#C71F37]"}),(0,r.jsx)(c.p,{className:"px-6 py-4 border-[#C71F37]/20  focus-visible:border-ring focus-visible:ring-[#C71F37]/100 focus-visible:ring-[3px]",onChange:e=>x.setSearch(e.target.value)})]}),(0,r.jsx)("div",{className:"flex gap-3 overflow-x-scroll mt-10 ",children:A.map((e,t)=>(0,r.jsxs)("div",{className:"relative flex flex-col items-center text-gray-600 w-24 h-24    border-2 border-[#C71f37] ".concat(e.id==a&&"bg-[#C71F37] text-white","  rounded-md"),onClick:()=>{g(e.id||""),C(e)},children:[(0,r.jsx)(u.default,{src:"".concat(h.Hc,"/").concat(e.image_url),alt:"menu icon",width:100,height:100,className:"w-full h-16 object-cover"}),(0,r.jsx)("h3",{className:"absolute bottom-0 left-0 w-full  flex items-center justify-center ",children:e.name})]},t))}),(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"text-[#C71F37] font-medium text-[18px] mt-5 ",children:null==N?void 0:N.name})}),(0,r.jsx)("div",{className:"mt-5 flex flex-col gap-3 mb-10",children:b.map((e,t)=>(0,r.jsxs)(p(),{href:"/".concat(w.restaurantId,"/").concat(e.id),className:"max-h-[300px] p-0 rounded-lg relative ",children:[(0,r.jsx)(u.default,{src:"".concat(h.Hc,"/").concat(e.image_url),alt:"menu image",width:500,height:500,className:"w-full max-h-[300px] object-cover rounded-lg"}),(0,r.jsxs)("div",{className:"absolute bottom-2 left-0 w-full flex items-center justify-between px-8 text-white ",children:[(0,r.jsxs)("span",{className:"flex flex-col gap-1 text-bold text-[16px]",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsxs)("span",{children:["$",e.price]})]}),(0,r.jsx)("span",{children:(0,r.jsx)(l.A,{})})]}),(0,r.jsx)("div",{className:"absolute left-0 left-0 w-full h-full bg-gradient-to-t from-white/10 via-white/60 to-transparent z-40"})]},t))})]})})}},9550:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,AuthProvider:()=>i});var r=a(5155),n=a(2115),s=a(2107),o=a(3568);let c=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,n.useState)(null),[l,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=localStorage.getItem("access");e&&(i(e),s.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{console.error("Failed to fetch current user:",e),u(null)}))},[]),(0,r.jsx)(c.Provider,{value:{user:l,accessToken:a,isAuthenticated:!!a,login:e=>{i(e),s.D.getCurrentUser().then(e=>{u(e.data.data)}).catch(e=>{o.Ay.error("failed to fetch current user")})},logout:()=>{localStorage.removeItem("access"),i(null),u(null)}},children:t})},l=()=>{let e=(0,n.useContext)(c);if(void 0==e)throw Error("useAuth must be used within an Authprovider");return e}},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(5155);a(2115);var n=a(3999);function s(e){let{className:t,type:a,...s}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(2115);let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:d,...m}=e;return(0,r.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:a,strokeWidth:i?24*Number(c)/Number(n):c,className:s("lucide",l),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...d.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let a=(0,r.forwardRef)((a,o)=>{let{className:i,...l}=a;return(0,r.createElement)(c,{ref:o,iconNode:t,className:s("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...l})});return a.displayName=n(e),a}}},e=>{e.O(0,[7567,397,7244,6766,8441,5964,7358],()=>e(e.s=6591)),_N_E=e.O()}]);