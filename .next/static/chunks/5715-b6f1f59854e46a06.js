"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5715],{405:(e,t,a)=>{a.d(t,{W:()=>s});var n=a(2115);function s(){let e=[10,20,30,40,50],[t,a]=(0,n.useState)(1),[s,r]=(0,n.useState)(""),[l,o]=(0,n.useState)(0),[c,i]=(0,n.useState)(e[0]||10),d=(0,n.useMemo)(()=>0===c?0:Math.ceil(l/c),[l,c]);return{page:t,totalCount:l,setPage:a,setTotalCount:o,handleNextPage:()=>{t<d&&a(e=>e+1)},handlePrevPage:()=>{t>1&&a(e=>e-1)},page_sizes:e,pageSize:c,setPageSize:i,totalPages:d,search:s,setSearch:r}}},823:(e,t,a)=>{a.d(t,{AM:()=>l,Wv:()=>o,hl:()=>c});var n=a(5155);a(2115);var s=a(547),r=a(3999);function l(e){let{...t}=e;return(0,n.jsx)(s.bL,{"data-slot":"popover",...t})}function o(e){let{...t}=e;return(0,n.jsx)(s.l9,{"data-slot":"popover-trigger",...t})}function c(e){let{className:t,align:a="center",sideOffset:l=4,...o}=e;return(0,n.jsx)(s.ZL,{children:(0,n.jsx)(s.UC,{"data-slot":"popover-content",align:a,sideOffset:l,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...o})})}},854:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(5155),s=a(2115),r=a(2177),l=a(7168),o=a(4895),c=a(9540),i=a(823),d=a(3999),u=a(1154),x=a(81),p=a(5196);function m(e){let{config:t,onFilterChange:a,generateReport:m}=e,[h,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(!1),j=(0,r.mN)();return(0,n.jsxs)("div",{className:"w-full flex items-center justify-between bg-white px-4 py-2",children:[(0,n.jsx)(c.lV,{...j,children:(0,n.jsxs)("form",{onSubmit:j.handleSubmit(e=>{a(e)}),className:"flex flex-wrap gap-4 items-center",children:[t.map(e=>{let{label:t,name:a,type:s,options:r,from_db:m=!1,setSearch:b,search:y,isLoading:w=!1,data:N=[],searchItems:A}=e;return(0,n.jsx)("div",{className:"flex flex-col min-w-[200px]",children:"select"===s?m&&b&&A?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(c.zB,{control:j.control,name:a,render:e=>{var a;let{field:s}=e;return(0,n.jsxs)(c.eI,{className:"flex flex-col ",children:[(0,n.jsx)(c.lR,{className:"absolute left-2 -top-2 bg-white text-sm px-1 text-gray-600",children:t}),(0,n.jsxs)(i.AM,{open:g,onOpenChange:e=>{v(e),e?y&&0===N.length&&!w&&A():b("")},children:[(0,n.jsx)(i.Wv,{asChild:!0,children:(0,n.jsx)(c.MJ,{children:(0,n.jsxs)(l.$,{variant:"outline",role:"combobox","aria-expanded":g,className:(0,d.cn)("w-full justify-between",!s.value&&"text-muted-foreground"),disabled:w&&g,children:[w&&g?(0,n.jsxs)("span",{className:"flex items-center",children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):s.value?(null==(a=N.find(e=>e.id===s.value))?void 0:a.name)||"Loading...":"Select a category...",!w&&(0,n.jsx)(x.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,n.jsx)(i.hl,{className:"w-[300px] p-0",children:(0,n.jsxs)(o.uB,{children:[(0,n.jsx)(o.G7,{placeholder:"Search categories...",value:y,onValueChange:b}),(0,n.jsx)(o.oI,{children:w&&g?(0,n.jsxs)(o.xL,{className:"py-6 text-center text-sm",children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin inline-block"}),"Fetching menu category..."]}):0===N.length?(0,n.jsx)(o.xL,{className:"py-6 text-center text-sm",children:"No menu category found."}):(0,n.jsx)(o.L$,{children:N.map((e,t)=>(0,n.jsxs)(o.h_,{value:e.name,onSelect:()=>{s.onChange(e.id),v(!1),b("")},children:[(0,n.jsx)(p.A,{className:(0,d.cn)("mr-2 h-4 w-4",e.id===s.value?"opacity-100":"opacity-0")}),e.name]},t))})})]})})]})]})}}),j.getValues(a)&&(0,n.jsx)("button",{type:"button",onClick:()=>j.setValue(a,""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-red-600",children:"✕"})]}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(c.zB,{control:j.control,name:a,render:e=>{var s;let{field:u}=e;return(0,n.jsxs)(c.eI,{className:"flex flex-col ",children:[(0,n.jsx)(c.lR,{className:"absolute left-2 -top-2 bg-white text-sm px-1 text-gray-600",children:t}),(0,n.jsxs)(i.AM,{open:h===a,onOpenChange:e=>f(e?a:null),children:[(0,n.jsx)(i.Wv,{asChild:!0,children:(0,n.jsx)(c.MJ,{children:(0,n.jsxs)(l.$,{variant:"outline",role:"combobox","aria-expanded":h===a,className:"w-[200px] justify-between",children:[u.value?null==r||null==(s=r.find(e=>e.value===u.value))?void 0:s.label:"Select option...",(0,n.jsx)(x.A,{className:"ml-2 h-4 w-4 opacity-50"})]})})}),(0,n.jsx)(i.hl,{className:"w-[200px] p-0",children:(0,n.jsxs)(o.uB,{children:[(0,n.jsx)(o.G7,{placeholder:"Search...",className:"h-9"}),(0,n.jsxs)(o.oI,{children:[(0,n.jsx)(o.xL,{children:"No results found."}),(0,n.jsx)(o.L$,{children:null==r?void 0:r.map((e,t)=>(0,n.jsxs)(o.h_,{onSelect:()=>{u.onChange(e.value),f(null)},children:[e.label,(0,n.jsx)(p.A,{className:(0,d.cn)("ml-auto h-4 w-4",u.value===e.value?"opacity-100":"opacity-0")})]},t))})]})]})})]})]})}}),j.getValues(a)&&(0,n.jsx)("button",{type:"button",onClick:()=>j.setValue(a,""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-red-600",children:"✕"})]}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("label",{className:"absolute left-2 -top-2 bg-white text-sm px-1 text-gray-600",children:t}),(0,n.jsx)("input",{type:s,className:"border rounded px-2 py-2 pr-8 w-[200px]",placeholder:t,...j.register(a)}),j.getValues(a)&&(0,n.jsx)("button",{type:"button",onClick:()=>j.setValue(a,""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-red-600",children:"✕"})]})},a)}),(0,n.jsx)(l.$,{type:"submit",className:"bg-primary hover:bg-primary/90",children:"Apply"})]})}),(0,n.jsx)(l.$,{variant:"secondary",className:"ml-4 hover:bg-gray-500 hover:text-gray-200",onClick:m,children:"Generate Report"})]})}},1412:(e,t,a)=>{a.d(t,{N:()=>s});var n=a(5784);let s={generateOrderReport:r,generateOrderDetail:l,generateMenuReport:o,generateShopReport:c,generateOrgReport:i,generateUsersReport:d};async function r(e){return await n.A.patch("/reports/orders/",{...e})}async function l(e){return await n.A.get("/reports/orders/".concat(e,"/"))}async function o(e){return await n.A.patch("/reports/menus/",{...e})}async function c(e){return await n.A.patch("reports/shops/",e)}async function i(e){return await n.A.patch("reports/organizations/",e)}async function d(e){return await n.A.patch("reports/users/",e)}},2107:(e,t,a)=>{a.d(t,{D:()=>s});var n=a(5784);let s={registerUser:function(e){return n.A.post("/register/",e)},login:r,logout:x,getCurrentUser:l,changePassword:o,getUsers:c,forgetPassword:i,resetPassword:d,updateProfile:u};async function r(e){return await n.A.post("/token/",e)}async function l(){return await n.A.get("/me/")}async function o(e){return await n.A.put("/change-password/",e)}async function c(e){return await n.A.get("/users/",{params:{...e}})}async function i(e){return await n.A.post("/password-reset/",{email:e})}async function d(e){return await n.A.post("/password-reset/confirm/?token=".concat(e.token),e)}async function u(e){return await n.A.patch("/update-profile/".concat(e.id,"/"),e)}async function x(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login"}},4895:(e,t,a)=>{a.d(t,{G7:()=>c,L$:()=>u,h_:()=>x,oI:()=>i,uB:()=>o,xL:()=>d});var n=a(5155);a(2115);var s=a(7740),r=a(7924),l=a(3999);function o(e){let{className:t,...a}=e;return(0,n.jsx)(s.uB,{"data-slot":"command",className:(0,l.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,n.jsx)(r.A,{className:"size-4 shrink-0 opacity-50"}),(0,n.jsx)(s.uB.Input,{"data-slot":"command-input",className:(0,l.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...a})]})}function i(e){let{className:t,...a}=e;return(0,n.jsx)(s.uB.List,{"data-slot":"command-list",className:(0,l.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...a})}function d(e){let{...t}=e;return(0,n.jsx)(s.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function u(e){let{className:t,...a}=e;return(0,n.jsx)(s.uB.Group,{"data-slot":"command-group",className:(0,l.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...a})}function x(e){let{className:t,...a}=e;return(0,n.jsx)(s.uB.Item,{"data-slot":"command-item",className:(0,l.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}a(9840)},5411:(e,t,a)=>{a.d(t,{dK:()=>i,Iu:()=>d,cU:()=>u,n$:()=>x,WA:()=>m,Eb:()=>p});var n=a(5155);a(2115);var s=a(9946);let r=(0,s.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),l=(0,s.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var o=a(3999),c=a(7168);function i(e){let{className:t,...a}=e;return(0,n.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,o.cn)("mx-auto flex w-full justify-center",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("ul",{"data-slot":"pagination-content",className:(0,o.cn)("flex flex-row items-center gap-1",t),...a})}function u(e){let{...t}=e;return(0,n.jsx)("li",{"data-slot":"pagination-item",...t})}function x(e){let{className:t,isActive:a,size:s="icon",...r}=e;return(0,n.jsx)("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:(0,o.cn)((0,c.r)({variant:a?"outline":"ghost",size:s}),t),...r})}function p(e){let{className:t,...a}=e;return(0,n.jsxs)(x,{"aria-label":"Go to previous page",size:"default",className:(0,o.cn)("gap-1 px-2.5 sm:pl-2.5",t),...a,children:[(0,n.jsx)(r,{}),(0,n.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function m(e){let{className:t,...a}=e;return(0,n.jsxs)(x,{"aria-label":"Go to next page",size:"default",className:(0,o.cn)("gap-1 px-2.5 sm:pr-2.5",t),...a,children:[(0,n.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,n.jsx)(l,{})]})}},5623:(e,t,a)=>{a.d(t,{A:()=>n});let n=(0,a(9946).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},8524:(e,t,a)=>{a.d(t,{A0:()=>l,BF:()=>o,Hj:()=>c,XI:()=>r,nA:()=>d,nd:()=>i});var n=a(5155);a(2115);var s=a(3999);function r(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",t),...a})})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},9550:(e,t,a)=>{a.d(t,{A:()=>i,AuthProvider:()=>c});var n=a(5155),s=a(2115),r=a(2107),l=a(3568);let o=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[a,c]=(0,s.useState)(null),[i,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("access");e&&(c(e),r.D.getCurrentUser().then(e=>{d(e.data.data)}).catch(e=>{console.error("Failed to fetch current user:",e),d(null)}))},[]),(0,n.jsx)(o.Provider,{value:{user:i,accessToken:a,isAuthenticated:!!a,login:e=>{c(e),r.D.getCurrentUser().then(e=>{d(e.data.data)}).catch(e=>{l.Ay.error("failed to fetch current user")})},logout:()=>{localStorage.removeItem("access"),c(null),d(null)}},children:t})},i=()=>{let e=(0,s.useContext)(o);if(void 0==e)throw Error("useAuth must be used within an Authprovider");return e}}}]);