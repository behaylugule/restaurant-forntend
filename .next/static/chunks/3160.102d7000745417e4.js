"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3160],{3160:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(5155),l=n(9540),i=n(2177),a=n(9852),s=n(7168),o=n(495),u=n(2115),c=n(3568),d=n(3828),f=n(9550);let p=(0,u.createContext)(null);function m(){let e=(0,u.use)(p);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var h=n(5752),x=n.n(h);let g=(0,u.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:l,id:i,placeholder:a,style:s,whenReady:o,zoom:c,...d},f){let[m]=(0,u.useState)({className:l,id:i,style:s}),[x,g]=(0,u.useState)(null),b=(0,u.useRef)(void 0);(0,u.useImperativeHandle)(f,()=>x?.map??null,[x]);let v=(0,u.useCallback)(r=>{if(null!==r&&!b.current){let l=new h.Map(r,d);b.current=l,null!=n&&null!=c?l.setView(n,c):null!=e&&l.fitBounds(e,t),null!=o&&l.whenReady(o),g(Object.freeze({__version:1,map:l}))}},[]);(0,u.useEffect)(()=>()=>{x?.map.remove()},[x]);let j=x?u.createElement(p,{value:x},r):a??null;return u.createElement("div",{...m,ref:v},j)});function b(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function v(e,t){return null==t?function(t,n){let r=(0,u.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let l=(0,u.useRef)(void 0);l.current||(l.current=e(n,r));let i=(0,u.useRef)(n),{instance:a}=l.current;return(0,u.useEffect)(function(){i.current!==n&&(t(a,n,i.current),i.current=n)},[a,n,t]),l}}function j(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function y(e){return function(t){var n;let r=m(),l=e(j(t,r),r);return!function(e,t){let n=(0,u.useRef)(t);(0,u.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}(r.map,t.attribution),!function(e,t){let n=(0,u.useRef)(void 0);(0,u.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}(l.current,t.eventHandlers),n=l.current,(0,u.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),l}}n(7650);let S=function(e,t){var n;return n=y(v(e,t)),(0,u.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,u.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return b(new h.TileLayer(e,j(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:l}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=l&&l!==n.zIndex&&e.setZIndex(l);let{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)}),w=function(e,t){var n;return n=y(v(e,t)),(0,u.forwardRef)(function(e,t){let{instance:r,context:l}=n(e).current;(0,u.useImperativeHandle)(t,()=>r);let{children:i}=e;return null==i?null:u.createElement(p,{value:l},i)})}(function({position:e,...t},n){var r;let l=new h.Marker(e,t);return b(l,(r={overlayContainer:l},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),R=e=>{let{onSelect:t}=e;return!function(e){let t=m().map;(0,u.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e])}({click(e){t(e.latlng.lat,e.latlng.lng)}}),null};function C(e){let{value:t,onChange:n}=e,{position:l,handleMapClick:i}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[9.03,38.74],[t,n]=(0,u.useState)(e);return{position:t,setPosition:n,handleMapClick:(e,t)=>{n([e,t])}}}(t||[9.03,38.74]);return(0,r.jsxs)(g,{center:l,zoom:13,style:{height:"400px",width:"100%"},children:[(0,r.jsx)(S,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(R,{onSelect:(e,t)=>{i(e,t),n([e,t])}}),(0,r.jsx)(w,{position:l,icon:x().icon({iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41]})})]})}function I(e){var t,n;let{setOpen:p,getshops:m,actionType:h,shopDetail:x}=e,g=(0,i.mN)({defaultValues:{...x}}),[b,v]=(0,u.useState)(!1),{user:j}=(0,f.A)(),[y,S]=(0,u.useState)(""),[w,R]=(0,u.useState)([0,0]),I=e=>{R(e)};return(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(l.lV,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(e=>{e.lat=w[0],e.lng=w[1],""!=y&&(e.shop_logo=y),"add"===h?(e.organization=j.organization,e.shop_logo=y,v(!0),o.S.addShop(e).then(()=>{c.Ay.success("Book has been created sucessfuly"),v(!1),p(!1),m()}).catch(e=>{v(!1),console.log(e)})):"edit"===h&&o.S.updateShop(e).then(()=>{c.Ay.success("Book has been updated sucessfuly"),v(!1),p(!1),m()}).catch(e=>{console.log(e)})}),children:[(0,r.jsxs)(l.eI,{className:"",children:[(0,r.jsx)(l.lR,{children:"name"}),(0,r.jsx)(l.MJ,{children:(0,r.jsx)(a.p,{placeholder:"name",...g.register("name",{required:"name is required field"})})}),g.formState.errors.name&&(0,r.jsx)(l.Rr,{className:"text-red text-sm",children:g.formState.errors.name.message}),(0,r.jsx)(l.C5,{})]}),(0,r.jsxs)(l.eI,{className:"mt-4",children:[(0,r.jsx)(l.lR,{children:"description"}),(0,r.jsx)(l.MJ,{children:(0,r.jsx)(a.p,{placeholder:"description",...g.register("description",{required:"description is required field"})})}),g.formState.errors.description&&(0,r.jsx)(l.Rr,{className:"text-red text-sm",children:null==(t=g.formState.errors.description)?void 0:t.message})]}),(0,r.jsxs)(l.eI,{className:"mt-4",children:[(0,r.jsx)(l.lR,{children:"address"}),(0,r.jsx)(l.MJ,{children:(0,r.jsx)(a.p,{placeholder:"address",...g.register("address",{required:"address is required field"})})}),g.formState.errors.address&&(0,r.jsx)(l.Rr,{className:"text-red text-sm",children:null==(n=g.formState.errors.address)?void 0:n.message})]}),(0,r.jsxs)(l.eI,{className:"mt-4",children:[(0,r.jsx)(l.lR,{children:" Location"}),(0,r.jsx)(i.xI,{name:"location",control:g.control,render:e=>{let{field:t}=e;return(0,r.jsx)(C,{value:t.value,onChange:I})}})]}),(0,r.jsxs)(l.eI,{className:"mt-4 mb-4",children:[(0,r.jsx)(l.lR,{children:"Logo"}),(0,r.jsx)(l.MJ,{children:(0,r.jsx)(a.p,{placeholder:"shop logo",type:"file",onChange:e=>{if(e.target.files){if(!e.target.files[0])return;let t=new FormData;t.append("file",e.target.files[0]),t.append("title",e.target.files[0].name),d.Y.uploadFile(t).then(e=>{S(e.data.data.id)}).catch(e=>{console.log(e)})}}})})]}),(0,r.jsx)(s.$,{type:"submit",className:"mt-4 hover:bg-gray-600",children:b?(0,r.jsx)("span",{className:"inline-block w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}):"edit"==h?"Update Shop":"Add Shop"})]})})})}},3828:(e,t,n)=>{n.d(t,{Y:()=>l});var r=n(5784);let l={uploadFile:i};async function i(e){return await r.A.post("/upload/",e,{headers:{"Content-Type":"multipart/form-data"}})}},9852:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(5155);n(2115);var l=n(3999);function i(e){let{className:t,type:n,...i}=e;return(0,r.jsx)("input",{type:n,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}}}]);